{"ast":null,"code":"import _classCallCheck from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fernando/tfg/portal/reactfront/src/components/generics/header.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport EditUserModal from '../user/editUserModal';\nvar base_url = \"http://127.0.0.1:8000\";\n\nfunction Greeting(props) {\n  var url = window.location.href.split('/');\n  var current_location = url[url.length - 1];\n\n  if (props.userName !== \"\") {\n    return React.createElement(\"div\", {\n      className: \"user_profile_wp\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"up_greeting\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16\n      },\n      __self: this\n    }, \"Bienvenido, \", props.userName), React.createElement(\"div\", {\n      className: \"up_dropdown\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }, current_location !== 'profile' ? React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21\n      },\n      __self: this\n    }, \"Ir a secci\\xF3n administrador\") : null, React.createElement(\"div\", {\n      className: \"row\",\n      onClick: props.onClickEdit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    }, \"Editar tus datos\"), React.createElement(\"div\", {\n      className: \"row\",\n      onClick: props.onClickLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }, \"Cerrar sesi\\xF3n\"))); // return <a className=\"nav-link active login-landing\" href=\"/profile\">Bienvenido, {props.userName}</a>;\n  } else {\n    return React.createElement(\"a\", {\n      className: \"nav-link active login-landing\",\n      href: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, \"Login\");\n  }\n}\n\nvar Header =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Header, _Component);\n\n  function Header(props) {\n    var _this;\n\n    _classCallCheck(this, Header);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Header).call(this, props));\n\n    _this.onChangeEditUsername = function (e) {\n      _this.setState({\n        editUser_username: e.target.value\n      });\n    };\n\n    _this.onChangeEditEmail = function (e) {\n      _this.setState({\n        editUser_email: e.target.value\n      });\n    };\n\n    _this.onChangeEditPassword = function (e) {\n      _this.setState({\n        editUser_password: e.target.value\n      });\n    };\n\n    _this.state = {\n      redirectToLanding: false,\n      user: {},\n      display_edit_modal: 'none',\n      editUser_username: '',\n      editUser_email: '',\n      editUser_password: ''\n    };\n    _this.logout = _this.logout.bind(_assertThisInitialized(_this));\n    _this.onClickEdit = _this.onClickEdit.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    _this.fetchUserMeta = _this.fetchUserMeta.bind(_assertThisInitialized(_this));\n    _this.onChangeEditUsername = _this.onChangeEditUsername.bind(_assertThisInitialized(_this));\n    _this.onChangeEditPassword = _this.onChangeEditPassword.bind(_assertThisInitialized(_this));\n    _this.onChangeEditEmail = _this.onChangeEditEmail.bind(_assertThisInitialized(_this));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Header, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.fetchUserMeta();\n    }\n  }, {\n    key: \"fetchUserMeta\",\n    value: function fetchUserMeta() {\n      var _this2 = this;\n\n      axios.get(base_url + '/user_meta/', {\n        headers: {\n          'Authorization': \"Token \".concat(localStorage.getItem(\"token\"))\n        }\n      }).then(function (res) {\n        _this2.setState({\n          user: res.data.user,\n          editUser_username: res.data.user.username,\n          editUser_email: res.data.user.email\n        });\n\n        localStorage.setItem(\"user\", res.data.user.id);\n      }).catch(function (error) {\n        _this2.logout();\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      localStorage.removeItem(\"token\");\n      this.setState({\n        redirectToLanding: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        display_edit_modal: 'none'\n      });\n    }\n  }, {\n    key: \"onClickEdit\",\n    value: function onClickEdit() {\n      console.log(\"Edit\");\n      this.setState({\n        display_edit_modal: ''\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      console.log(\"Submit!\", this.state);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.redirectToLanding) {\n        return React.createElement(Redirect, {\n          to: \"/login\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"row profile-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_entry\",\n        style: {\n          display: this.state.display_edit_modal\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_users\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form_edit_user height_100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \" Editar usuario \"), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"username_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Usuario\"), React.createElement(\"input\", {\n        value: this.state.editUser_username,\n        onChange: this.onChangeEditUsername,\n        type: \"text\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"useremail_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"input\", {\n        value: this.state.editUser_email,\n        onChange: this.onChangeEditEmail,\n        type: \"email\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"userpass_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Contrase\\xF1a\"), React.createElement(\"input\", {\n        value: this.state.editUser_password,\n        placeholder: \"\",\n        onChange: this.onChangeEditPassword,\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"warn edit_user_password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Si se deja vac\\xEDo el campo contrase\\xF1a, se mantendr\\xE1 su valor anterior\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, this.state.edit_error_message), React.createElement(\"button\", {\n        type: \"button\",\n        id: \"edit_user_edit\",\n        className: \"btn btn-primary\",\n        onClick: this.onSubmitEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Editar\"), React.createElement(\"button\", {\n        onClick: this.closeModal,\n        type: \"button\",\n        className: \"btn btn-secondary\",\n        \"data-dismiss\": \"modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Cancelar\"))))), React.createElement(\"div\", {\n        id: \"uc3m_logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"image\", {\n        src: '../static/img/portada_logo.png',\n        alt: \"UC3M Logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"profile-avatar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(Greeting, {\n        userName: this.state.user.username,\n        onClickLogout: this.logout,\n        onClickEdit: this.onClickEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Header;\n}(Component);\n\nexport default Header;","map":{"version":3,"sources":["/home/fernando/tfg/portal/reactfront/src/components/generics/header.js"],"names":["React","Component","Redirect","axios","EditUserModal","base_url","Greeting","props","url","window","location","href","split","current_location","length","userName","onClickEdit","onClickLogout","Header","onChangeEditUsername","e","setState","editUser_username","target","value","onChangeEditEmail","editUser_email","onChangeEditPassword","editUser_password","state","redirectToLanding","user","display_edit_modal","logout","bind","closeModal","fetchUserMeta","onSubmit","get","headers","localStorage","getItem","then","res","data","username","email","setItem","id","catch","error","removeItem","console","log","display","edit_error_message","onSubmitEdit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { Redirect } from 'react-router-dom';\n\nimport axios from 'axios';\n\nimport EditUserModal from '../user/editUserModal'\n\nconst base_url = \"http://127.0.0.1:8000\"\n\nfunction Greeting(props) {\n    var url = window.location.href.split('/')\n    var current_location = url[url.length-1]\n    if( props.userName !== \"\"){\n        return <div className=\"user_profile_wp\">\n                    <div className=\"up_greeting\">\n                        Bienvenido, {props.userName}    \n                    </div>\n                    <div className=\"up_dropdown\">\n                        { current_location !== 'profile'\n                            ? <div className=\"row\">\n                                    Ir a sección administrador\n                                </div>\n                            : null\n                        }\n                        <div className=\"row\"\n                            onClick={props.onClickEdit}\n                        >\n                            Editar tus datos\n                        </div>\n                        <div className=\"row\"\n                            onClick={props.onClickLogout}\n                        >\n                            Cerrar sesión\n                        </div>\n                    </div>\n              </div>\n\n        // return <a className=\"nav-link active login-landing\" href=\"/profile\">Bienvenido, {props.userName}</a>;\n    } else {\n        return <a className=\"nav-link active login-landing\" href=\"/login\">Login</a>;\n    }\n}\n\nclass Header extends Component {\n    constructor(props){\n        super(props)\n\n        this.state = {\n            redirectToLanding: false,\n            user: {},\n            display_edit_modal: 'none',\n            editUser_username: '',\n            editUser_email: '',\n            editUser_password: '',\n\n        }\n\n        this.logout = this.logout.bind(this);\n        this.onClickEdit = this.onClickEdit.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n\n        this.fetchUserMeta = this.fetchUserMeta.bind(this);\n\n        this.onChangeEditUsername = this.onChangeEditUsername.bind(this);\n        this.onChangeEditPassword = this.onChangeEditPassword.bind(this);\n        this.onChangeEditEmail = this.onChangeEditEmail.bind(this);\n\n        this.onSubmit = this.onSubmit.bind(this);\n    }\n\n    componentWillMount(){\n        this.fetchUserMeta()\n    }\n\n    fetchUserMeta() {\n        axios.get(base_url + '/user_meta/', \n        {\n            headers: {\n                'Authorization': `Token ${localStorage.getItem(\"token\")}`,\n            }\n        }).then(\n            res => {\n                this.setState({\n                    user: res.data.user,\n                    editUser_username: res.data.user.username,\n                    editUser_email: res.data.user.email,\n                })\n                localStorage.setItem(\"user\", res.data.user.id)\n            }\n        ).catch(\n            error => {\n                this.logout();\n            }\n        )\n    }\n\n    logout() {\n        localStorage.removeItem(\"token\");\n        this.setState({\n            redirectToLanding: true,\n        })\n    }\n\n    closeModal() {\n        this.setState({\n            display_edit_modal: 'none',\n        })\n    }\n\n    onClickEdit() {\n        console.log(\"Edit\");\n        this.setState({\n            display_edit_modal: '',\n        })\n    }\n\n    onChangeEditUsername = (e) => {\n        this.setState({editUser_username: e.target.value})\n    }\n\n    onChangeEditEmail = (e) => {\n        this.setState({editUser_email: e.target.value})\n    }\n\n    onChangeEditPassword = (e) => {\n        this.setState({editUser_password: e.target.value})\n    }\n\n    onSubmit() {\n        console.log(\"Submit!\", this.state)\n    }\n\n    render(){\n        if (this.state.redirectToLanding) {\n            return <Redirect to='/login' />\n        }\n\n        return (\n            \n            <div className=\"row profile-header\">\n                <div className=\"modal_entry\"  style={{display: this.state.display_edit_modal}} >\n                    <div className=\"modal_users\">\n                        <div className=\"form_edit_user height_100\">\n                            <h3> Editar usuario </h3>\n                            <form>\n                                <label className=\"username_label\">Usuario</label>\n                                <input value={this.state.editUser_username}\n                                        onChange={this.onChangeEditUsername}\n                                        type=\"text\"\n                                        required\n                                        />\n\n                                <label className=\"useremail_label\">Email</label>\n                                <input value={this.state.editUser_email}\n                                        onChange={this.onChangeEditEmail}\n                                        type=\"email\"\n                                        required\n                                        />\n\n                                <label className=\"userpass_label\">Contraseña</label>\n                                    <input\n                                        value={this.state.editUser_password}\n                                        placeholder=\"\"\n                                        onChange={this.onChangeEditPassword}\n                                        type=\"text\"\n                                        />\n                                <div className=\"warn edit_user_password\">\n                                    Si se deja vacío el campo contraseña, se mantendrá su valor anterior\n                                </div>\n\n                                <div>{this.state.edit_error_message}</div>\n\n                                <button type=\"button\" \n                                        id=\"edit_user_edit\"\n                                        className=\"btn btn-primary\" \n                                        onClick={this.onSubmitEdit}>\n                                        Editar \n                                        </button>\n\n                                <button onClick={this.closeModal} \n                                        type=\"button\" \n                                        className=\"btn btn-secondary\" \n                                        data-dismiss=\"modal\">\n                                        Cancelar\n                                        </button>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n                \n\n                <div id=\"uc3m_logo\">\n                \n                    <image src={'../static/img/portada_logo.png'} alt=\"UC3M Logo\"/>\n                </div>\n                <div id=\"profile-avatar\">\n                \n                    <Greeting \n                        userName={this.state.user.username}\n                        onClickLogout={this.logout}\n                        onClickEdit={this.onClickEdit}\n                        />\n                </div>\n            </div>\n            )\n        }    \n}\n                \nexport default Header;"]},"metadata":{},"sourceType":"module"}