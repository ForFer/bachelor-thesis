{"ast":null,"code":"import _classCallCheck from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fernando/tfg/portal/reactfront/src/components/user/addUser.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nvar base_url = \"http://127.0.0.1:8000\";\n\nvar AddUser =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddUser, _Component);\n\n  function AddUser(props) {\n    var _this;\n\n    _classCallCheck(this, AddUser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddUser).call(this, props));\n\n    _this.onChangeNewUser = function (e) {\n      _this.setState({\n        new_username: e.target.value\n      });\n    };\n\n    _this.onChangeNewEmail = function (e) {\n      _this.setState({\n        new_useremail: e.target.value\n      });\n    };\n\n    _this.onChangeNewPassword = function (e) {\n      _this.setState({\n        new_userpassword: e.target.value\n      });\n    };\n\n    _this.onChangeNewPasswordRepeated = function (e) {\n      var password = e.target.value;\n      var errorMessage = _this.state.errorMessage;\n      errorMessage = _this.state.password !== password ? \"Las contraseñas no coinciden\" : '';\n\n      _this.setState({\n        new_userpassword_repeated: password,\n        errorMessage: errorMessage\n      });\n    };\n\n    _this.state = {\n      new_username: '',\n      new_useremail: '',\n      new_userpassword: '',\n      new_userpassword_repeated: '',\n      errorMessage: ''\n    };\n    _this.onChangeNewUser = _this.onChangeNewUser.bind(_assertThisInitialized(_this));\n    _this.onChangeNewEmail = _this.onChangeNewEmail.bind(_assertThisInitialized(_this));\n    _this.onChangeNewPassword = _this.onChangeNewPassword.bind(_assertThisInitialized(_this));\n    _this.createUser = _this.createUser.bind(_assertThisInitialized(_this));\n    _this.onChangeNewPasswordRepeated = _this.onChangeNewPasswordRepeated.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(AddUser, [{\n    key: \"createUser\",\n    value: function createUser() {\n      var _this2 = this;\n\n      if (!this.state.new_username) {\n        this.setState({\n          errorMessage: \"Introduce usuario por favor\"\n        });\n        return null;\n      }\n\n      if (!this.state.new_useremail) {\n        this.setState({\n          errorMessage: \"Introduce email por favor\"\n        });\n        return null;\n      }\n\n      if (!this.state.new_userpassword) {\n        this.setState({\n          errorMessage: \"Introduce contraseña por favor\"\n        });\n        return null;\n      }\n\n      if (!this.state.new_userpassword !== this.state.new_userpassword_repeated) {\n        this.setState({\n          errorMessage: \"Las contraseñas no coinciden\"\n        });\n        return null;\n      }\n\n      var postData = {\n        'username': this.state.new_username,\n        'email': this.state.new_useremail,\n        'password': this.state.new_userpassword\n      };\n      axios.post(base_url + '/user/', postData, {\n        headers: {\n          'Content-Type': 'application/json; charset=UTF-8',\n          'Authorization': \"Token \".concat(localStorage.getItem(\"token\"))\n        }\n      }).then(function (res) {\n        _this2.setState({\n          errorMessage: '',\n          new_username: '',\n          new_useremail: '',\n          new_userpassword: ''\n        });\n\n        window.alert(\"¡Usuario creado correctamente!\");\n      }).catch(function (error) {\n        var error_message = \"\";\n        var res = error.response.data;\n        if (res.email) error_message += res.email + \"\\n\";\n        if (res.username) error_message += res.username + \"\\n\";\n        if (res.password) error_message += res.password + \"\\n\";\n\n        _this2.setState({\n          errorMessage: error_message\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"adduser_wrapper margin_auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"adduser_info_wp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \" \", React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \" A\\xF1adir un usuario \"), \" \"), React.createElement(\"div\", {\n        className: \"warn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \" El usuario tendr\\xE1 todos los permisos para crear, consultar, editar y borrar registros y otros usuarios\")), React.createElement(\"div\", {\n        className: \"form_add_user height_100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"username_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Usuario\"), React.createElement(\"input\", {\n        value: this.state.new_username,\n        onChange: this.onChangeNewUser,\n        type: \"text\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"useremail_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"input\", {\n        value: this.state.new_useremail,\n        onChange: this.onChangeNewEmail,\n        type: \"email\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"userpass_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Contrase\\xF1a\"), React.createElement(\"input\", {\n        value: this.state.new_userpassword,\n        onChange: this.onChangeNewPassword,\n        type: \"password\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"userpass_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"Repite la contrase\\xF1a\"), React.createElement(\"input\", {\n        value: this.state.new_userpassword_repeated,\n        onChange: this.onChangeNewPasswordRepeated,\n        type: \"password\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }))), React.createElement(\"button\", {\n        className: \"btn_create_user\",\n        onClick: this.createUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Confirmar crear usuario \"), React.createElement(\"div\", {\n        className: \"login_error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, this.state.errorMessage));\n    }\n  }]);\n\n  return AddUser;\n}(Component);\n\nexport default AddUser; //    {/* <div className=\"login_error\" >{this.state.error_message}</div> */}","map":{"version":3,"sources":["/home/fernando/tfg/portal/reactfront/src/components/user/addUser.js"],"names":["React","Component","axios","base_url","AddUser","props","onChangeNewUser","e","setState","new_username","target","value","onChangeNewEmail","new_useremail","onChangeNewPassword","new_userpassword","onChangeNewPasswordRepeated","password","errorMessage","state","new_userpassword_repeated","bind","createUser","postData","post","headers","localStorage","getItem","then","res","window","alert","catch","error","error_message","response","data","email","username"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport axios from 'axios';\n\nconst base_url = \"http://127.0.0.1:8000\"\n\nclass AddUser extends Component {\n    constructor(props){\n        super(props)\n\n        this.state = {\n            new_username: '',\n            new_useremail: '',\n            new_userpassword: '',\n            new_userpassword_repeated: '',\n            errorMessage: '',\n        }\n\n        this.onChangeNewUser = this.onChangeNewUser.bind(this);\n        this.onChangeNewEmail = this.onChangeNewEmail.bind(this);\n        this.onChangeNewPassword = this.onChangeNewPassword.bind(this);\n\n        this.createUser = this.createUser.bind(this);\n        this.onChangeNewPasswordRepeated = this.onChangeNewPasswordRepeated.bind(this);\n    }\n\n    onChangeNewUser = (e) => {\n        this.setState({\n            new_username: e.target.value,\n        })\n    }\n\n    onChangeNewEmail = (e) => {\n        this.setState({\n            new_useremail: e.target.value,\n        })\n    }\n\n    onChangeNewPassword = (e) => {\n        this.setState({\n            new_userpassword: e.target.value,\n        })\n    }\n\n    onChangeNewPasswordRepeated = (e) => {\n        var password = e.target.value;\n        var errorMessage = this.state.errorMessage;\n\n        errorMessage = this.state.password !== password \n                ? \"Las contraseñas no coinciden\"\n                : ''\n \n        this.setState({\n            new_userpassword_repeated: password,\n            errorMessage: errorMessage,\n        })\n    }\n\n    createUser() {\n\n        if(!this.state.new_username){\n            this.setState({\n                errorMessage: \"Introduce usuario por favor\"\n            })\n            return null;\n        }\n\n        if(!this.state.new_useremail){\n            this.setState({\n                errorMessage: \"Introduce email por favor\"\n            })\n            return null;\n        }\n\n        if(!this.state.new_userpassword){\n            this.setState({\n                errorMessage: \"Introduce contraseña por favor\"\n            })\n            return null;\n        }\n\n        if(!this.state.new_userpassword !== this.state.new_userpassword_repeated){\n            this.setState({\n                errorMessage: \"Las contraseñas no coinciden\"\n            })\n            return null;\n        }\n\n        var postData = {\n            'username': this.state.new_username,\n            'email':this.state.new_useremail,\n            'password': this.state.new_userpassword,\n        };\n\n        axios.post(base_url + '/user/',\n            postData,\n                { \n                    headers: {\n                        'Content-Type': 'application/json; charset=UTF-8',\n                        'Authorization': `Token ${localStorage.getItem(\"token\")}`,\n                    }\n                }\n        ).then(\n            res => {\n                this.setState({\n                    errorMessage: '',\n                    new_username: '',\n                    new_useremail: '',\n                    new_userpassword: '',\n                })\n                window.alert(\"¡Usuario creado correctamente!\")\n            }\n        ).catch (\n            error => {\n                var error_message = \"\";\n                var res = error.response.data;\n                if(res.email) error_message += res.email + \"\\n\"\n                if(res.username) error_message += res.username + \"\\n\"\n                if(res.password) error_message += res.password + \"\\n\"\n\n                this.setState({\n                    errorMessage: error_message\n                })\n            }\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"adduser_wrapper margin_auto\">\n                <div className=\"adduser_info_wp\">\n                    <div className=\"\"> <h3> Añadir un usuario </h3> </div>\n                    <div className=\"warn\"> El usuario tendrá todos los \n                        permisos para crear, consultar, editar y borrar registros y otros usuarios\n                        </div>\n                </div>\n                <div className=\"form_add_user height_100\">\n                    <form>\n                        <label className=\"username_label\">Usuario</label>\n                        <input value={this.state.new_username}\n                                onChange={this.onChangeNewUser}\n                                type=\"text\"\n                                required\n                                />\n\n                        <label className=\"useremail_label\">Email</label>\n                        <input value={this.state.new_useremail}\n                                onChange={this.onChangeNewEmail}\n                                type=\"email\"\n                                required\n                                />\n\n                        <label className=\"userpass_label\">Contraseña</label>\n                            <input value={this.state.new_userpassword}\n                                onChange={this.onChangeNewPassword}\n                                type=\"password\"\n                                required\n                                />\n\n                        <label className=\"userpass_label\">Repite la contraseña</label>\n                            <input value={this.state.new_userpassword_repeated}\n                                onChange={this.onChangeNewPasswordRepeated}\n                                type=\"password\"\n                                required\n                                />\n                    </form>\n                </div>\n                <button \n                    className=\"btn_create_user\"\n                    onClick={this.createUser}> \n                    Confirmar crear usuario </button>\n                <div className=\"login_error\">\n                    {this.state.errorMessage}                    \n                </div>\n            </div>\n        )\n    }\n}\n\nexport default AddUser;\n\n\n//    {/* <div className=\"login_error\" >{this.state.error_message}</div> */}\n"]},"metadata":{},"sourceType":"module"}