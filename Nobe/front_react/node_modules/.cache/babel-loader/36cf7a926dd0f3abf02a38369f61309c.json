{"ast":null,"code":"import _classCallCheck from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fernando/tfg/portal/reactfront/src/components/generics/addEntry.js\";\nimport React, { Component } from 'react';\nimport Dropzone from 'react-dropzone';\n\nfunction testClick(e) {\n  e.preventDefault();\n  e.stopPropagation();\n  console.log(\"Click!\");\n}\n\nfunction arrayUnique(array) {\n  var a = array.concat();\n\n  for (var i = 0; i < a.length; ++i) {\n    for (var j = i + 1; j < a.length; ++j) {\n      if (a[i].name === a[j].name) a.splice(j--, 1);\n    }\n  }\n\n  return a;\n}\n\nvar currentYear = new Date().getYear() + 1900;\n\nfunction yearBiggerThanCurrent(year) {\n  return parseInt(year) > currentYear;\n}\n\nvar AddEntry =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddEntry, _Component);\n\n  function AddEntry(props) {\n    var _this;\n\n    _classCallCheck(this, AddEntry);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddEntry).call(this, props));\n\n    _this.onChangeTitle = function (e) {\n      _this.setState({\n        title: e.target.value\n      });\n    };\n\n    _this.onChangeAuthor = function (e) {\n      _this.setState({\n        author: e.target.value\n      });\n    };\n\n    _this.onChangeYear = function (e) {\n      var errorMessage = e.target.value.match(/^[1-9]\\d{0,3}$|^0$/g) && !yearBiggerThanCurrent(e.target.value) ? \"\" : \"El año tiene que ser 0 o mayor, con un formato válido (01 no es válido), y menor que el año actual\";\n\n      _this.setState({\n        year: e.target.value,\n        errorMessage: errorMessage\n      });\n    };\n\n    _this.onFilesUpload = function (files) {\n      console.log(files);\n\n      _this.setState({\n        images: arrayUnique(_this.state.images.concat(files))\n      });\n    };\n\n    _this.onImgRemove = function (e, id) {\n      e.preventDefault();\n      e.stopPropagation();\n      console.log(id);\n    };\n\n    _this.state = {\n      title: '',\n      year: '',\n      author: '',\n      images: [],\n      errorMessage: ''\n    };\n    _this.onChangeTitle = _this.onChangeTitle.bind(_assertThisInitialized(_this));\n    _this.onChangeAuthor = _this.onChangeAuthor.bind(_assertThisInitialized(_this));\n    _this.onChangeYear = _this.onChangeYear.bind(_assertThisInitialized(_this));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_this));\n    _this.onFilesUpload = _this.onFilesUpload.bind(_assertThisInitialized(_this));\n    _this.onImgRemove = _this.onImgRemove.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(AddEntry, [{\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      if (!this.state.title) {\n        this.setState({\n          errorMessage: \"Introduce título por favor\"\n        });\n        return null;\n      }\n\n      if (!this.state.author) {\n        this.setState({\n          errorMessage: \"Introduce autor por favor\"\n        });\n        return null;\n      }\n\n      if (!this.state.year) {\n        this.setState({\n          errorMessage: \"Introduce año por favor\"\n        });\n        return null;\n      }\n\n      if (yearBiggerThanCurrent(this.state.year)) {\n        this.setState({\n          errorMessage: \"El año tiene que ser menor o igual al actual\"\n        });\n        return null;\n      }\n\n      if (this.state.images.length === 0) {\n        this.setState({\n          errorMessage: \"Introduce por lo menos una imagen\"\n        });\n        return null;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"adduser_wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"adduser_info_wp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \" A\\xF1adir un registro \")), React.createElement(\"div\", {\n        className: \"form_add_entry height_100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"T\\xEDtulo\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"addEntry_title\",\n        value: this.state.title,\n        onChange: this.onChangeTitle,\n        type: \"text\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Autor\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        value: this.state.author,\n        onChange: this.onChangeAuthor,\n        type: \"text\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"A\\xF1o de creaci\\xF3n\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        value: this.state.year,\n        onChange: this.onChangeYear,\n        type: \"text\",\n        pattern: \"^[1-9]\\\\d{1,4}$\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \" Im\\xE1genes \"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }), React.createElement(Dropzone, {\n        onDrop: function onDrop(acceptedFiles) {\n          return _this2.onFilesUpload(acceptedFiles);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, function (_ref) {\n        var getRootProps = _ref.getRootProps,\n            getInputProps = _ref.getInputProps,\n            isDragActive = _ref.isDragActive;\n        return React.createElement(\"section\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            fontSize: \"small\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, \" Los nombres de las imagenes tienen que ser \\xFAnicos \"), React.createElement(\"div\", Object.assign({}, getRootProps(), {\n          className: \"dropzone\",\n          onClick: function onClick(files) {\n            return _this2.onFilesUpload(files);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }), React.createElement(\"input\", Object.assign({}, getInputProps(), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        })), isDragActive ? React.createElement(\"p\", {\n          className: \"drop_label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, \"Suelta las im\\xE1genes aqui... \") : React.createElement(\"p\", {\n          className: \"drop_label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, \" Arrastra y suelta las im\\xE1genes, o had click aqui para seleccionar imagenes\"), _this2.state.images.map(function (image) {\n          return (// <div className=\"row\"\n            //     key={image.name}>\n            //     <div className=\"col-10\">{image.name}</div>\n            //     <div className=\"col-2\" onClick={testClick}> Borrar </div>\n            // </div>\n            React.createElement(\"div\", {\n              className: \"addEntry_thumbnail\",\n              key: image.name,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 193\n              },\n              __self: this\n            }, React.createElement(\"img\", {\n              className: \"addEntry_thumbnail_img\",\n              src: URL.createObjectURL(image),\n              alt: image.name,\n              onClick: function onClick(e) {\n                return testClick(e);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 196\n              },\n              __self: this\n            }), React.createElement(\"div\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 202\n              },\n              __self: this\n            }, \" \", image.name, \" \"), React.createElement(\"div\", {\n              className: \"remove_drop_img\",\n              onClick: function onClick(e) {\n                return _this2.onImgRemove(e, image.id);\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 204\n              },\n              __self: this\n            }, \"X\"))\n          );\n        })));\n      }))), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn_create_user\",\n        onClick: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"Crear registro \"), React.createElement(\"div\", {\n        className: \"login_error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, this.state.errorMessage));\n    }\n  }]);\n\n  return AddEntry;\n}(Component);\n\nexport default AddEntry;","map":{"version":3,"sources":["/home/fernando/tfg/portal/reactfront/src/components/generics/addEntry.js"],"names":["React","Component","Dropzone","testClick","e","preventDefault","stopPropagation","console","log","arrayUnique","array","a","concat","i","length","j","name","splice","currentYear","Date","getYear","yearBiggerThanCurrent","year","parseInt","AddEntry","props","onChangeTitle","setState","title","target","value","onChangeAuthor","author","onChangeYear","errorMessage","match","onFilesUpload","files","images","state","onImgRemove","id","bind","onSubmit","acceptedFiles","getRootProps","getInputProps","isDragActive","fontSize","map","image","URL","createObjectURL"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Dropzone from 'react-dropzone'\n\nfunction testClick(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    console.log(\"Click!\")\n}\n\nfunction arrayUnique(array) {\n    var a = array.concat();\n    for(var i=0; i<a.length; ++i) {\n        for(var j=i+1; j<a.length; ++j) {\n            if(a[i].name === a[j].name)\n                a.splice(j--, 1);\n        }\n    }\n\n    return a;\n}\n\nconst currentYear = new Date().getYear() + 1900;\n\nfunction yearBiggerThanCurrent(year) {\n    return parseInt(year) > currentYear;\n}\n\nclass AddEntry extends Component {\n    constructor(props){\n        super(props)\n\n        this.state = {\n            title:'',\n            year: '',\n            author: '',\n            images: [],\n            errorMessage: '',\n        }\n\n\n        this.onChangeTitle = this.onChangeTitle.bind(this);\n        this.onChangeAuthor = this.onChangeAuthor.bind(this);\n        this.onChangeYear = this.onChangeYear.bind(this);\n\n        this.onSubmit = this.onSubmit.bind(this);\n\n        this.onFilesUpload = this.onFilesUpload.bind(this);\n        this.onImgRemove = this.onImgRemove.bind(this);\n        \n    }\n\n    onChangeTitle = (e) => {\n        this.setState({\n            title: e.target.value,\n        })\n    }\n\n    onChangeAuthor = (e) => {\n        this.setState({\n            author: e.target.value,\n        })\n    }\n\n    onChangeYear = (e) => {\n        let errorMessage = (e.target.value.match(/^[1-9]\\d{0,3}$|^0$/g) \n                            && !yearBiggerThanCurrent(e.target.value) ) \n                            ? \"\"\n                            : \"El año tiene que ser 0 o mayor, con un formato válido (01 no es válido), y menor que el año actual\"\n    \n        this.setState({\n            year: e.target.value,\n            errorMessage: errorMessage,\n        })\n    }\n\n    onFilesUpload = (files) => {\n        console.log(files);\n        this.setState({\n            images: arrayUnique(this.state.images.concat(files)),\n        })\n    }\n\n    onImgRemove = (e, id) => {\n        e.preventDefault();\n        e.stopPropagation();\n        console.log(id);\n    }\n\n    onSubmit() {\n        if (!this.state.title){\n            this.setState({\n                errorMessage: \"Introduce título por favor\"\n            })\n            return null;\n        }\n        \n        if (!this.state.author){\n            this.setState({\n                errorMessage: \"Introduce autor por favor\"\n            })\n            return null;\n        }\n\n        if (!this.state.year){\n            this.setState({\n                errorMessage: \"Introduce año por favor\"\n            })\n            return null;\n        }\n\n        if (yearBiggerThanCurrent(this.state.year) ){\n            this.setState({\n                errorMessage: \"El año tiene que ser menor o igual al actual\"\n            })\n            return null;\n        }\n\n        if (this.state.images.length === 0){\n            this.setState({\n                errorMessage: \"Introduce por lo menos una imagen\"\n            })\n            return null;\n        }\n    }\n\n    render() {\n        return(\n            \n            <div className=\"adduser_wrapper\">\n\n                <div className=\"adduser_info_wp\">\n                    <h3> Añadir un registro </h3>\n                </div>\n\n                <div className=\"form_add_entry height_100\">\n                    <form>\n                        <label>Título</label>\n                        <br/>\n                        <input  className=\"addEntry_title\"\n                                value={this.state.title}\n                                onChange={this.onChangeTitle}\n                                type=\"text\"\n                                required\n                                />\n                        <br/>\n\n                        <label>Autor</label>\n                        <br/>\n                        <input value={this.state.author}\n                                onChange={this.onChangeAuthor}\n                                type=\"text\"\n                                required\n                                />\n\n                        <br/>\n                        <label>Año de creación</label>\n                        <br/>\n                        <input value={this.state.year}\n                                onChange={this.onChangeYear}\n                                type=\"text\"\n                                pattern=\"^[1-9]\\d{1,4}$\"\n                                required\n                                />\n                        <br/>\n                        \n                        <br/> <br/>\n                        <label> Imágenes </label>\n                        <br/>\n\n                        <Dropzone\n                        onDrop={acceptedFiles => this.onFilesUpload(acceptedFiles)}>\n                        {({getRootProps, getInputProps, isDragActive}) => (\n                            <section>\n                            <div style={{fontSize: \"small\"}}> Los nombres de las imagenes tienen que ser únicos </div>\n                            <div {...getRootProps()}\n                                className=\"dropzone\"\n                                onClick={files => this.onFilesUpload(files)}>\n                                <input {...getInputProps()} />\n                                {\n                                isDragActive \n                                    ? <p className=\"drop_label\">Suelta las imágenes aqui... </p> \n                                    : <p className=\"drop_label\"> Arrastra y suelta las imágenes, o had click aqui para seleccionar imagenes</p>\n                                }\n\n                                {\n                                    this.state.images.map(\n                                        image => (\n                                            // <div className=\"row\"\n                                            //     key={image.name}>\n                                            //     <div className=\"col-10\">{image.name}</div>\n                                            //     <div className=\"col-2\" onClick={testClick}> Borrar </div>\n                                            // </div>\n                                            <div className=\"addEntry_thumbnail\"\n                                                key={image.name}\n                                                >\n                                                <img\n                                                    className=\"addEntry_thumbnail_img\" \n                                                    src={URL.createObjectURL(image)} \n                                                    alt={image.name}\n                                                    onClick={(e) => testClick(e)}\n                                                    />\n                                                <div> {image.name} </div>\n\n                                                <div className=\"remove_drop_img\"\n                                                    onClick={(e) => this.onImgRemove(e, image.id)}\n                                                    >X</div>\n                                            </div>\n                                            )\n                                    )\n                                }\n                            </div>\n                            </section>\n                        )}\n                        </Dropzone>\n\n                    </form>\n                </div>\n\n                <button \n                    type=\"submit\"\n                    className=\"btn_create_user\"\n                    onClick={this.onSubmit}\n                    > \n                    Crear registro </button>\n                <div className=\"login_error\">\n                    {this.state.errorMessage}                    \n                </div>\n\n            </div>\n        )\n    }\n}\n\nexport default AddEntry;"]},"metadata":{},"sourceType":"module"}