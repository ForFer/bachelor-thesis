{"ast":null,"code":"import _classCallCheck from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fernando/tfg/portal/reactfront/src/components/generics/addEntry.js\";\nimport React, { Component } from 'react';\nimport Dropzone from 'react-dropzone';\nimport axios from 'axios';\nvar currentYear = new Date().getYear() + 1900;\nvar base_url = 'http://127.0.0.1:8000';\n\nfunction arrayUnique(array) {\n  var a = array.concat();\n\n  for (var i = 0; i < a.length; ++i) {\n    for (var j = i + 1; j < a.length; ++j) {\n      if (a[i].name === a[j].name) a.splice(j--, 1);\n    }\n  }\n\n  return a;\n}\n\nfunction yearBiggerThanCurrent(year) {\n  return parseInt(year) > currentYear;\n}\n\nvar AddEntry =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddEntry, _Component);\n\n  function AddEntry(props) {\n    var _this;\n\n    _classCallCheck(this, AddEntry);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddEntry).call(this, props));\n\n    _this.onChangeTitle = function (e) {\n      _this.setState({\n        title: e.target.value\n      });\n    };\n\n    _this.onChangeAuthor = function (e) {\n      _this.setState({\n        author: e.target.value\n      });\n    };\n\n    _this.onChangeYear = function (e) {\n      var errorMessage = e.target.value.match(/^[1-9]\\d{0,3}$|^0$/g) && !yearBiggerThanCurrent(e.target.value) ? \"\" : \"El año tiene que ser 0 o mayor, con un formato válido (01 no es válido), y menor que el año actual\";\n\n      _this.setState({\n        year: e.target.value,\n        errorMessage: errorMessage\n      });\n    };\n\n    _this.onFilesUpload = function (files) {\n      _this.setState({\n        images: arrayUnique(_this.state.images.concat(files))\n      });\n    };\n\n    _this.onImgRemove = function (e, name) {\n      e.preventDefault();\n      e.stopPropagation();\n      var imgs = _this.state.images;\n\n      _this.setState({\n        images: imgs.filter(function (img) {\n          return img.name !== name;\n        })\n      });\n    };\n\n    _this.state = {\n      title: '',\n      year: '',\n      author: '',\n      images: [],\n      errorMessage: '',\n      new_entry_id: 9,\n      new_entry_imgs: '',\n      new_entry_img_index: 0,\n      modal_display: 'none',\n      lightbox_display: 'none'\n    };\n    _this.onChangeTitle = _this.onChangeTitle.bind(_assertThisInitialized(_this));\n    _this.onChangeAuthor = _this.onChangeAuthor.bind(_assertThisInitialized(_this));\n    _this.onChangeYear = _this.onChangeYear.bind(_assertThisInitialized(_this));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_this));\n    _this.onFilesUpload = _this.onFilesUpload.bind(_assertThisInitialized(_this));\n    _this.onImgRemove = _this.onImgRemove.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    _this.reviewImages = _this.reviewImages.bind(_assertThisInitialized(_this));\n    _this.nextImage = _this.nextImage.bind(_assertThisInitialized(_this));\n    _this.previousImage = _this.previousImage.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(AddEntry, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.reviewImages();\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (!this.state.title) {\n        this.setState({\n          errorMessage: \"Introduce título por favor\"\n        });\n        return null;\n      }\n\n      if (!this.state.author) {\n        this.setState({\n          errorMessage: \"Introduce autor por favor\"\n        });\n        return null;\n      }\n\n      if (!this.state.year) {\n        this.setState({\n          errorMessage: \"Introduce año por favor\"\n        });\n        return null;\n      }\n\n      if (yearBiggerThanCurrent(this.state.year)) {\n        this.setState({\n          errorMessage: \"El año tiene que ser menor o igual al actual\"\n        });\n        return null;\n      }\n\n      if (this.state.images.length === 0) {\n        this.setState({\n          errorMessage: \"Introduce por lo menos una imagen\"\n        });\n        return null;\n      }\n\n      var formData = new FormData();\n      formData.append(\"title\", this.state.title);\n      formData.append(\"author\", this.state.author);\n      formData.append(\"year\", this.state.year);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.state.images[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var image = _step.value;\n          formData.append('images', image);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      axios.post(base_url + '/entry/', formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          'Authorization': \"Token \".concat(localStorage.getItem(\"token\"))\n        }\n      }).then(function (res) {\n        console.log(res, res.data);\n\n        _this2.setState({\n          title: '',\n          year: '',\n          author: '',\n          images: [],\n          errorMessage: '',\n          new_entry_id: res.data.entry_id,\n          modal_display: ''\n        });\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        modal_display: 'none',\n        lightbox_display: 'none',\n        new_entry_id: ''\n      });\n    }\n  }, {\n    key: \"reviewImages\",\n    value: function reviewImages() {\n      var _this3 = this;\n\n      axios.get(\"\".concat(base_url, \"/entry/\").concat(this.state.new_entry_id, \"/\"), {\n        headers: {\n          'Authorization': \"Token \".concat(localStorage.getItem(\"token\"))\n        }\n      }).then(function (res) {\n        _this3.setState({\n          modal_display: '',\n          lightbox_display: '',\n          new_entry_imgs: res.data.entry_images\n        });\n      });\n    }\n  }, {\n    key: \"previousImage\",\n    value: function previousImage() {\n      var previousIndex = this.state.new_entry_img_index === 1 ? 0 : this.state.new_entry_img_index + 1;\n      this.setState({\n        new_entry_img_index: previousIndex\n      });\n    }\n  }, {\n    key: \"nextImage\",\n    value: function nextImage() {\n      var nextIndex = this.state.new_entry_img_index === this.state.new_entry_imgs.length ? this.state.new_entry_imgs.length : this.state.new_entry_img_index - 1;\n      this.setState({\n        new_entry_img_index: nextIndex\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      console.log(this.state);\n      console.log(this.state.new_entry_img_index === 0, this.state.new_entry_img_index === this.state.new_entry_imgs.length);\n      var style1 = {\n        position: 'fixed',\n        inset: '0px',\n        backgroundColor: 'transparent',\n        zIndex: 1000\n      };\n      var style2 = {\n        position: 'absolute',\n        inset: '0px',\n        border: 'medium none',\n        background: 'transparent none repeat scroll 0% 0%',\n        overflow: 'hidden',\n        borderRadius: '0px',\n        outline: 'currentcolor none medium',\n        padding: '0px'\n      };\n      var style3 = {\n        transition: 'opacity 300ms ease 0s',\n        animationDuration: '300ms',\n        animationDirection: 'reverse'\n      };\n      return React.createElement(\"div\", {\n        className: \"adduser_wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_entry\",\n        style: {\n          display: this.state.modal_display\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_entry_detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"close\",\n        id: \"btn_close_modal\",\n        \"aria-label\": \"Close\",\n        onClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"\\xD7\")), React.createElement(\"div\", {\n        className: \"row review_confirmation_msg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"Registro creado correctamente, \\xBFquieres revisar ahora las imagenes? Si eliges no hacerlo, lo puedes hacer m\\xE1s tarde editando el registro\"), React.createElement(\"div\", {\n        className: \"review_confirmation_btns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        id: \"edit_user_edit\",\n        className: \"btn btn-primary\",\n        onClick: this.reviewImages,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"Editar\"), React.createElement(\"button\", {\n        onClick: this.closeModal,\n        type: \"button\",\n        className: \"btn btn-secondary\",\n        \"data-dismiss\": \"modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"Cancelar\")))), React.createElement(\"div\", {\n        className: \"reviewWrapper\",\n        style: {\n          display: this.state.lightbox_display\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ReactModal__Overlay ReactModal__Overlay--after-open\",\n        style: style1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: style2,\n        className: \"ReactModal__Content ReactModal__Content--after-open\",\n        tabIndex: \"-1\",\n        role: \"dialog\",\n        \"aria-label\": \"Lightbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ril-outer ril__outer ril__outerAnimating  \",\n        style: style3,\n        tabIndex: \"-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ril-inner ril__inner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"review_modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, \"Test?\")), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"ril-prev-button ril__navButtons ril__navButtonPrev\",\n        \"aria-label\": \"Previous image\",\n        onClick: this.previousImage,\n        disabled: this.state.new_entry_img_index === 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"ril-next-button ril__navButtons ril__navButtonNext\",\n        \"aria-label\": \"Next image\",\n        onClick: this.nextImage,\n        disabled: this.state.new_entry_img_index === this.state.new_entry_imgs.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"adduser_info_wp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \" A\\xF1adir un registro \")), React.createElement(\"div\", {\n        className: \"form_add_entry height_100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, \"T\\xEDtulo\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"addEntry_title\",\n        value: this.state.title,\n        onChange: this.onChangeTitle,\n        type: \"text\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, \"Autor\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        value: this.state.author,\n        onChange: this.onChangeAuthor,\n        type: \"text\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, \"A\\xF1o de creaci\\xF3n\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        value: this.state.year,\n        onChange: this.onChangeYear,\n        type: \"text\",\n        pattern: \"^[1-9]\\\\d{0,3}$|^0$\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, \" Im\\xE1genes \"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }), React.createElement(Dropzone, {\n        onDrop: function onDrop(acceptedFiles) {\n          return _this4.onFilesUpload(acceptedFiles);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, function (_ref) {\n        var getRootProps = _ref.getRootProps,\n            getInputProps = _ref.getInputProps,\n            isDragActive = _ref.isDragActive;\n        return React.createElement(\"section\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 348\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            fontSize: \"small\",\n            fontStyle: \"italic\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 349\n          },\n          __self: this\n        }, \" Los nombres de las imagenes tienen que ser \\xFAnicos \"), React.createElement(\"div\", Object.assign({}, getRootProps(), {\n          className: \"dropzone\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 350\n          },\n          __self: this\n        }), React.createElement(\"input\", Object.assign({}, getInputProps(), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 352\n          },\n          __self: this\n        })), _this4.state.images.length === 0 ? isDragActive ? React.createElement(\"p\", {\n          className: \"drop_label row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 356\n          },\n          __self: this\n        }, \"Suelta las im\\xE1genes aqui... \") : React.createElement(\"p\", {\n          className: \"drop_label row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 357\n          },\n          __self: this\n        }, \"Arrastra y suelta las im\\xE1genes, o had click aqu\\xED para seleccionar imagenes\") : null, _this4.state.images.map(function (image) {\n          return React.createElement(\"div\", {\n            className: \"addentry_row row\",\n            key: image.name,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 364\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"col-10\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 366\n            },\n            __self: this\n          }, image.name), React.createElement(\"div\", {\n            className: \"col-2\",\n            onClick: function onClick(e) {\n              return _this4.onImgRemove(e, image.name);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 367\n            },\n            __self: this\n          }, \" Borrar \"));\n        })));\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn_create_user\",\n        onClick: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }, \"Crear registro \"), React.createElement(\"div\", {\n        className: \"login_error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383\n        },\n        __self: this\n      }, this.state.errorMessage))));\n    }\n  }]);\n\n  return AddEntry;\n}(Component);\n\nexport default AddEntry;","map":{"version":3,"sources":["/home/fernando/tfg/portal/reactfront/src/components/generics/addEntry.js"],"names":["React","Component","Dropzone","axios","currentYear","Date","getYear","base_url","arrayUnique","array","a","concat","i","length","j","name","splice","yearBiggerThanCurrent","year","parseInt","AddEntry","props","onChangeTitle","e","setState","title","target","value","onChangeAuthor","author","onChangeYear","errorMessage","match","onFilesUpload","files","images","state","onImgRemove","preventDefault","stopPropagation","imgs","filter","img","new_entry_id","new_entry_imgs","new_entry_img_index","modal_display","lightbox_display","bind","onSubmit","closeModal","reviewImages","nextImage","previousImage","formData","FormData","append","image","post","headers","localStorage","getItem","then","res","console","log","data","entry_id","get","entry_images","previousIndex","nextIndex","style1","position","inset","backgroundColor","zIndex","style2","border","background","overflow","borderRadius","outline","padding","style3","transition","animationDuration","animationDirection","display","acceptedFiles","getRootProps","getInputProps","isDragActive","fontSize","fontStyle","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Dropzone from 'react-dropzone'\n\nimport axios from 'axios';\n\nconst currentYear = new Date().getYear() + 1900;\nconst base_url = 'http://127.0.0.1:8000'\n\nfunction arrayUnique(array) {\n    var a = array.concat();\n    for(var i=0; i<a.length; ++i) {\n        for(var j=i+1; j<a.length; ++j) {\n            if(a[i].name === a[j].name)\n                a.splice(j--, 1);\n        }\n    }\n\n    return a;\n}\n\nfunction yearBiggerThanCurrent(year) {\n    return parseInt(year) > currentYear;\n}\n\nclass AddEntry extends Component {\n    constructor(props){\n        super(props)\n\n        this.state = {\n            title:'',\n            year: '',\n            author: '',\n            images: [],\n            errorMessage: '',\n\n            new_entry_id: 9,\n            new_entry_imgs: '',\n            new_entry_img_index: 0,\n            modal_display: 'none',\n            lightbox_display: 'none',\n        }\n\n        this.onChangeTitle = this.onChangeTitle.bind(this);\n        this.onChangeAuthor = this.onChangeAuthor.bind(this);\n        this.onChangeYear = this.onChangeYear.bind(this);\n\n        this.onSubmit = this.onSubmit.bind(this);\n        \n        this.onFilesUpload = this.onFilesUpload.bind(this);\n        this.onImgRemove = this.onImgRemove.bind(this);\n        \n        this.closeModal = this.closeModal.bind(this);\n\n        this.reviewImages = this.reviewImages.bind(this);\n        this.nextImage = this.nextImage.bind(this);\n        this.previousImage = this.previousImage.bind(this);\n    }\n\n    componentDidMount() {\n        this.reviewImages();\n    }\n\n    onChangeTitle = (e) => {\n        this.setState({\n            title: e.target.value,\n        })\n    }\n\n    onChangeAuthor = (e) => {\n        this.setState({\n            author: e.target.value,\n        })\n    }\n\n    onChangeYear = (e) => {\n        let errorMessage = (e.target.value.match(/^[1-9]\\d{0,3}$|^0$/g) \n                            && !yearBiggerThanCurrent(e.target.value) ) \n                            ? \"\"\n                            : \"El año tiene que ser 0 o mayor, con un formato válido (01 no es válido), y menor que el año actual\"\n    \n        this.setState({\n            year: e.target.value,\n            errorMessage: errorMessage,\n        })\n    }\n\n    onFilesUpload = (files) => {\n        this.setState({\n            images: arrayUnique(this.state.images.concat(files)),\n        })\n    }\n\n    onImgRemove = (e, name) => {\n        e.preventDefault();\n        e.stopPropagation();\n        var imgs = this.state.images;\n        this.setState({\n            images: imgs.filter(img => img.name !== name),\n        })\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (!this.state.title){\n            this.setState({\n                errorMessage: \"Introduce título por favor\"\n            })\n            return null;\n        }\n        \n        if (!this.state.author){\n            this.setState({\n                errorMessage: \"Introduce autor por favor\"\n            })\n            return null;\n        }\n\n        if (!this.state.year){\n            this.setState({\n                errorMessage: \"Introduce año por favor\"\n            })\n            return null;\n        }\n\n        if (yearBiggerThanCurrent(this.state.year) ){\n            this.setState({\n                errorMessage: \"El año tiene que ser menor o igual al actual\"\n            })\n            return null;\n        }\n\n        if (this.state.images.length === 0){\n            this.setState({\n                errorMessage: \"Introduce por lo menos una imagen\"\n            })\n            return null;\n        }\n\n        const formData = new FormData();\n        formData.append(\"title\", this.state.title)\n        formData.append(\"author\", this.state.author)\n        formData.append(\"year\", this.state.year)\n        \n\n        for (const image of this.state.images) {\n            formData.append('images', image)\n        }\n\n        axios.post(base_url + '/entry/',\n            formData,\n            {\n                headers: {\n                    \"Content-Type\":\"multipart/form-data\",\n                    'Authorization': `Token ${localStorage.getItem(\"token\")}`,\n                }\n            }\n        ).then(\n            res => {\n                console.log(res, res.data)\n                this.setState({\n                    title:'',\n                    year: '',\n                    author: '',\n                    images: [],\n                    errorMessage: '',\n                    new_entry_id: res.data.entry_id,\n                    modal_display: '',\n                })\n            }\n        )\n    }\n\n    closeModal() {\n        this.setState({\n            modal_display: 'none',\n            lightbox_display: 'none',\n            new_entry_id: '',\n        })\n    }\n\n    reviewImages(){\n        axios.get(`${base_url}/entry/${this.state.new_entry_id}/`,\n            {\n                headers: {\n                    'Authorization': `Token ${localStorage.getItem(\"token\")}`,\n                }\n            }\n        ).then(\n            res => {\n                this.setState({\n                    modal_display: '',\n                    lightbox_display: '',\n                    new_entry_imgs: res.data.entry_images,\n                })\n            }\n        )\n\n    }\n\n    previousImage() {\n        const previousIndex = this.state.new_entry_img_index === 1\n                            ? 0\n                            : this.state.new_entry_img_index + 1;\n        this.setState({\n            new_entry_img_index: previousIndex,\n        })\n    }\n\n    nextImage() {\n        const nextIndex = this.state.new_entry_img_index === this.state.new_entry_imgs.length\n                            ? this.state.new_entry_imgs.length\n                            : this.state.new_entry_img_index - 1;\n        this.setState({\n            new_entry_img_index: nextIndex,\n        })\n    }\n\n    render() {\n        console.log(this.state)\n        console.log(this.state.new_entry_img_index === 0, this.state.new_entry_img_index === this.state.new_entry_imgs.length)\n        \n        const style1 = {position: 'fixed', inset: '0px', backgroundColor: 'transparent', zIndex: 1000}\n        const style2 = {position: 'absolute', inset: '0px', border: 'medium none', background: 'transparent none repeat scroll 0% 0%', overflow: 'hidden', borderRadius: '0px', outline: 'currentcolor none medium', padding: '0px'}\n        const style3 = {transition: 'opacity 300ms ease 0s', animationDuration: '300ms', animationDirection: 'reverse'}\n        \n        return(\n            \n            <div className=\"adduser_wrapper\">\n\n                <div className=\"modal_entry\"  style={{display: this.state.modal_display}} >\n                    <div className=\"modal_entry_detail\">\n                        <button type=\"button\" className=\"close\" id=\"btn_close_modal\" aria-label=\"Close\" onClick={this.closeModal}>\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <div className=\"row review_confirmation_msg\">\n                            Registro creado correctamente, ¿quieres revisar ahora las imagenes?\n                            Si eliges no hacerlo, lo puedes hacer más tarde editando el registro\n                        </div>\n                        <div className=\"review_confirmation_btns\">\n                            <button type=\"button\" \n                                    id=\"edit_user_edit\"\n                                    className=\"btn btn-primary\" \n                                    onClick={this.reviewImages}>\n                                    Editar \n                                    </button>\n\n                            <button onClick={this.closeModal} \n                                    type=\"button\" \n                                    className=\"btn btn-secondary\" \n                                    data-dismiss=\"modal\">\n                                    Cancelar\n                                    </button>\n                        </div>\n                        \n                    </div>\n                </div>\n\n                <div className=\"reviewWrapper\" \n                    style={{display: this.state.lightbox_display}}\n                    >\n                    <div className=\"ReactModal__Overlay ReactModal__Overlay--after-open\" \n                        style={style1}>\n\n                        <div style={style2} \n                             className=\"ReactModal__Content ReactModal__Content--after-open\" \n                             tabIndex=\"-1\" \n                             role=\"dialog\" \n                             aria-label=\"Lightbox\">\n\n                            <div className=\"ril-outer ril__outer ril__outerAnimating  \" \n                                 style={style3} \n                                 tabIndex=\"-1\">\n                            \n                                <div className=\"ril-inner ril__inner\">\n                                    <div className=\"review_modal\"> \n                                        Test? \n                                    </div>\n                                </div>\n                                \n                                <button type=\"button\" \n                                        className=\"ril-prev-button ril__navButtons ril__navButtonPrev\" \n                                        aria-label=\"Previous image\"\n                                        onClick={this.previousImage}\n                                        disabled={\n                                            this.state.new_entry_img_index === 0\n                                        }\n                                        >\n                                        </button>\n                                <button type=\"button\" \n                                        className=\"ril-next-button ril__navButtons ril__navButtonNext\" \n                                        aria-label=\"Next image\"\n                                        onClick={this.nextImage}\n                                        disabled={\n                                            this.state.new_entry_img_index === this.state.new_entry_imgs.length\n                                        }\n                                        >\n                                        </button>\n                            \n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"adduser_info_wp\">\n                    <h3> Añadir un registro </h3>\n                </div>\n\n                <div className=\"form_add_entry height_100\">\n                    <form>\n                        <label>Título</label>\n                        <br/>\n                        <input  className=\"addEntry_title\"\n                                value={this.state.title}\n                                onChange={this.onChangeTitle}\n                                type=\"text\"\n                                required\n                                />\n                        <br/>\n\n                        <label>Autor</label>\n                        <br/>\n                        <input value={this.state.author}\n                                onChange={this.onChangeAuthor}\n                                type=\"text\"\n                                required\n                                />\n\n                        <br/>\n                        <label>Año de creación</label>\n                        <br/>\n                        <input value={this.state.year}\n                                onChange={this.onChangeYear}\n                                type=\"text\"\n                                pattern=\"^[1-9]\\d{0,3}$|^0$\"\n                                required\n                                />\n                        <br/>\n                        \n                        <br/> <br/>\n                        <label> Imágenes </label>\n                        <br/>\n\n                        <Dropzone\n                        onDrop={acceptedFiles => this.onFilesUpload(acceptedFiles)}>\n                        {({getRootProps, getInputProps, isDragActive}) => (\n                            <section>\n                            <div style={{fontSize: \"small\", fontStyle:\"italic\"}}> Los nombres de las imagenes tienen que ser únicos </div>\n                            <div {...getRootProps()}\n                                className=\"dropzone\">\n                                <input {...getInputProps()} />\n                                {\n                                    this.state.images.length === 0\n                                    ? isDragActive \n                                        ? <p className=\"drop_label row\">Suelta las imágenes aqui... </p> \n                                        : <p className=\"drop_label row\">Arrastra y suelta las imágenes, o had click aquí para seleccionar imagenes</p> \n                                    : null\n                                }\n\n                                {\n                                    this.state.images.map(\n                                        image => (\n                                            <div className=\"addentry_row row\"\n                                                key={image.name}>\n                                                <div className=\"col-10\">{image.name}</div>\n                                                <div className=\"col-2\" onClick={(e) => this.onImgRemove(e, image.name)}> Borrar </div>\n                                            </div>\n                                            )\n                                    )\n                                }\n                            </div>\n                            </section>\n                        )}\n                        </Dropzone>\n\n                        <button \n                            type=\"submit\"\n                            className=\"btn_create_user\"\n                            onClick={this.onSubmit}\n                            > \n                            Crear registro </button>\n                        <div className=\"login_error\">\n                            {this.state.errorMessage}                    \n                        </div>\n\n                    </form>\n                </div>\n\n                \n\n            </div>\n        )\n    }\n}\n\nexport default AddEntry;"]},"metadata":{},"sourceType":"module"}