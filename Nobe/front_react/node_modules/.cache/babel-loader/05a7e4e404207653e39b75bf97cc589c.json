{"ast":null,"code":"import _objectWithoutProperties from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/fernando/tfg/portal/reactfront/src/components/search.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Header from './generics/header';\nimport Table from './generics/table';\nimport 'rc-slider/assets/index.css';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport Slider from 'rc-slider';\nvar createSliderWithTooltip = Slider.createSliderWithTooltip;\nvar Range = createSliderWithTooltip(Slider.Range);\n\nvar AuthorList = function AuthorList(_ref) {\n  var onChange = _ref.onChange,\n      authors = _ref.authors;\n  return React.createElement(\"select\", {\n    name: \"\",\n    id: \"author_profile\",\n    onChange: onChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, \"Autores\"), authors.map(function (author) {\n    return React.createElement(\"option\", {\n      key: author[0],\n      value: author[0],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23\n      },\n      __self: this\n    }, author[0]);\n  }));\n};\n\nvar OrderBySelector = function OrderBySelector(_ref2) {\n  var _React$createElement;\n\n  var onChange = _ref2.onChange,\n      name = _ref2.name;\n  return React.createElement(\"select\", {\n    name: name,\n    onChange: onChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, React.createElement(\"option\", (_React$createElement = {\n    value: \"0\"\n  }, _defineProperty(_React$createElement, \"value\", \"\"), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 31\n  }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement), \"Ordenar...\"), React.createElement(\"option\", {\n    key: \"1\",\n    value: \"ASCENDING\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, \"Ascendiente\"), React.createElement(\"option\", {\n    key: \"-1\",\n    value: \"DESCENDING\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, \"Descendiente\"));\n};\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search(_props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, _props));\n\n    _this.handle = function (props) {\n      var value = props.value,\n          dragging = props.dragging,\n          index = props.index,\n          restProps = _objectWithoutProperties(props, [\"value\", \"dragging\", \"index\"]);\n\n      _this.setState({\n        filter_from_year: props[0],\n        filter_to_year: props[1]\n      });\n    };\n\n    _this.onAuthorSelect = function (e) {\n      _this.setState({\n        filter_author: e.target.value\n      });\n    };\n\n    _this.onAuthorOrder = function (e) {\n      _this.setState({\n        order_by_author: e.target.value\n      });\n    };\n\n    _this.onTitleOrder = function (e) {\n      _this.setState({\n        order_by_title: e.target.value\n      });\n    };\n\n    _this.onYearOrder = function (e) {\n      _this.setState({\n        order_by_year: e.target.value\n      });\n    };\n\n    _this.submitData = function () {\n      _this.fetchData();\n    };\n\n    _this.state = {\n      data: _props.location.state.detail,\n      query_text: '',\n      filter_author: '',\n      filter_from_year: '',\n      filter_to_year: '',\n      order_by_year: '',\n      order_by_author: '',\n      order_by_title: '',\n      page: '',\n      page_size: '',\n      isLoggedIn: true,\n      searchResults: _this.props.location.state.detail.data,\n      authors: [],\n      min_year: '',\n      max_year: ''\n    };\n    _this.headers = [{\n      label: \"Titulo\",\n      id: \"title\",\n      numeric: false,\n      disablePadding: true\n    }, {\n      label: \"Autor\",\n      id: \"author\",\n      numeric: false,\n      disablePadding: true\n    }, {\n      label: \"AÃ±o\",\n      id: \"year\",\n      numeric: true,\n      disablePadding: true\n    }, {\n      label: \"Imagenes\",\n      id: \"entry_images\",\n      numeric: false,\n      disablePadding: true\n    }];\n    _this.handle = _this.handle.bind();\n    _this.onAuthorSelect = _this.onAuthorSelect.bind();\n    _this.onAuthorOrder = _this.onAuthorOrder.bind();\n    _this.onTitleOrder = _this.onTitleOrder.bind();\n    _this.onYearOrder = _this.onYearOrder.bind();\n    _this.submitData = _this.submitData.bind();\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this2 = this;\n\n      axios.get('http://127.0.0.1:8000/rest_entry/', {\n        parms: {\n          q: this.state.query_text,\n          order_year: this.state.order_by_year,\n          order_author: this.state.order_by_author,\n          order_title: this.state.order_by_title,\n          from_year: this.state.filter_from_year,\n          to_year: this.state.filter_to_year,\n          author: this.state.filter_author\n        }\n      }).then(function (res) {\n        console.debug(res.data);\n\n        _this2.setState({\n          data: res.data\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      axios.get('http://127.0.0.1:8000/entry_meta').then(function (res) {\n        _this3.setState({\n          authors: res.data.authors,\n          min_year: parseInt(res.data.min_year),\n          max_year: parseInt(res.data.max_year),\n          filter_from_year: parseInt(res.data.min_year),\n          filter_to_year: parseInt(res.data.max_year)\n        });\n      });\n      this.fetchData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.min_year || !this.state.max_year) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"search_wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Header, {\n        isLoggedIn: this.state.isLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"search_body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_filters col-xs-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Filtro por autor\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(AuthorList, {\n        onChange: this.onAuthorSelect,\n        authors: this.state.authors,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Ordenar por autor\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onAuthorOrder,\n        name: \"order_by_author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Ordenar por titulo\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onTitleOrder,\n        name: \"order_by_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Ordenar por a\\xF1o\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onYearOrder,\n        name: \"order_by_year\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"Filtro por a\\xF1o\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(Range, {\n        min: this.state.min_year,\n        max: this.state.max_year,\n        defaultValue: [this.state.min_year, this.state.max_year],\n        onChange: this.handle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"sf_value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, this.state.filter_from_year, \" - \", this.state.filter_to_year)), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.submitData,\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"Refinar la buscqueda!\"))), React.createElement(\"div\", {\n        className: \"search_results_wrapper col-xs-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_bar xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"search_results\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(Table, {\n        data: this.state.data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"search_footer xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default Search;","map":{"version":3,"sources":["/home/fernando/tfg/portal/reactfront/src/components/search.js"],"names":["React","Component","axios","Header","Table","Slider","createSliderWithTooltip","Range","AuthorList","onChange","authors","map","author","OrderBySelector","name","Search","props","handle","value","dragging","index","restProps","setState","filter_from_year","filter_to_year","onAuthorSelect","e","filter_author","target","onAuthorOrder","order_by_author","onTitleOrder","order_by_title","onYearOrder","order_by_year","submitData","fetchData","state","data","location","detail","query_text","page","page_size","isLoggedIn","searchResults","min_year","max_year","headers","label","id","numeric","disablePadding","bind","get","parms","q","order_year","order_author","order_title","from_year","to_year","then","res","console","debug","parseInt"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport axios from 'axios';\n\nimport Header from './generics/header'\nimport Table from './generics/table'\n\n\nimport 'rc-slider/assets/index.css';\nimport 'rc-tooltip/assets/bootstrap.css';\n\nimport Slider from 'rc-slider';\n\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\nconst Range = createSliderWithTooltip(Slider.Range);\n\n\nconst AuthorList = ({onChange, authors}) => (\n    <select name=\"\"\n            id=\"author_profile\"\n            onChange={onChange}>\n        <option value=\"\">Autores</option>\n        {authors.map(author => <option key={author[0]} value={author[0]}>{author[0]}</option>)}\n    </select>\n);\n\nconst OrderBySelector = ({onChange, name}) => (\n    <select name={name}\n        onChange={onChange}\n        >\n        <option value=\"0\" value=\"\">Ordenar...</option>\n        <option key=\"1\" value=\"ASCENDING\">Ascendiente</option>\n        <option key=\"-1\" value=\"DESCENDING\">Descendiente</option>\n    </select>\n);\n\n\nclass Search extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            data: props.location.state.detail,\n            query_text: '',\n            \n            filter_author: '',\n            filter_from_year: '',\n            filter_to_year: '',\n            \n            order_by_year: '',\n            order_by_author: '',\n            order_by_title: '',\n\n            page: '',\n            page_size: '',\n\n            isLoggedIn: true,\n\n            searchResults: this.props.location.state.detail.data,\n            authors: [],\n            min_year: '',\n            max_year: '',\n        }\n\n        this.headers = [\n                {label: \"Titulo\", id: \"title\", numeric: false, disablePadding: true},\n                {label: \"Autor\", id: \"author\", numeric: false, disablePadding: true},\n                {label: \"AÃ±o\", id: \"year\", numeric: true, disablePadding: true},\n                {label: \"Imagenes\", id: \"entry_images\", numeric: false, disablePadding: true},\n            ];\n\n        this.handle = this.handle.bind()\n        this.onAuthorSelect = this.onAuthorSelect.bind()\n        this.onAuthorOrder = this.onAuthorOrder.bind()\n        this.onTitleOrder = this.onTitleOrder.bind()\n        this.onYearOrder = this.onYearOrder.bind()\n        this.submitData = this.submitData.bind()\n    }\n  \n    fetchData(){\n        axios.get('http://127.0.0.1:8000/rest_entry/', {\n            parms: {\n                q: this.state.query_text,\n                order_year: this.state.order_by_year,\n                order_author: this.state.order_by_author,\n                order_title: this.state.order_by_title,\n                from_year: this.state.filter_from_year,\n                to_year: this.state.filter_to_year,\n                author: this.state.filter_author\n            }\n        })\n        .then(\n            res => {\n                console.debug(res.data)\n                this.setState({data: res.data})\n            }\n        )\n    }\n\n    componentDidMount(){\n        axios.get('http://127.0.0.1:8000/entry_meta').then(\n            res => {\n                this.setState({\n                    authors:  res.data.authors,\n                    min_year: parseInt(res.data.min_year),\n                    max_year: parseInt(res.data.max_year),\n                    filter_from_year: parseInt(res.data.min_year),\n                    filter_to_year: parseInt(res.data.max_year),\n                })\n            }\n        )\n\n       this.fetchData();\n    }\n\n    handle = (props) => {\n        const { value, dragging, index, ...restProps } = props;\n        this.setState({\n            filter_from_year: props[0],\n            filter_to_year: props[1],\n        })            \n    };\n\n    onAuthorSelect = (e) => {\n        this.setState({filter_author: e.target.value});\n    } \n\n    onAuthorOrder = (e) => {\n        this.setState({order_by_author: e.target.value})\n    }\n\n    onTitleOrder = (e) => {\n        this.setState({order_by_title: e.target.value})\n    }\n\n    onYearOrder = (e) => {\n        this.setState({order_by_year: e.target.value})\n    }\n    \n    submitData = () => {\n        this.fetchData()\n    }\n\n  render() {\n\n    if (!this.state.min_year || !this.state.max_year) {\n        return <div />\n    }\n\n    return (\n        <div className=\"search_wrapper\">\n            <div className=\"search_header\">\n                <Header isLoggedIn={this.state.isLoggedIn}/>\n            </div>\n            <div className=\"search_body\">\n                <div className=\"search_filters col-xs-4\">\n                    <div className=\"search_filter xs-12\">\n                        <div className=\"sf_name\">\n                            Filtro por autor\n                        </div>\n                        <div className=\"sf_filter\">\n                            <AuthorList\n                                onChange={this.onAuthorSelect}\n                                authors={this.state.authors}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"search_filter xs-12\">\n                        <div className=\"sf_name\">\n                        Ordenar por autor\n                        </div>\n                        <div className=\"sf_filter\">\n                            <OrderBySelector\n                                onChange={this.onAuthorOrder}\n                                name=\"order_by_author\"\n                            />\n                        </div>\n                    </div>\n                    \n                    <div className=\"search_filter xs-12\">\n                        <div className=\"sf_name\">\n                            Ordenar por titulo\n                        </div>\n                        <div className=\"sf_filter\">\n                            <OrderBySelector\n                                onChange={this.onTitleOrder}\n                                name=\"order_by_title\"\n                            />\n                        </div>\n                    </div>\n                    <div className=\"search_filter xs-12\">                        \n                        <div className=\"sf_name\">\n                            Ordenar por aÃ±o\n                        </div>\n                        <div className=\"sf_filter\">\n                            <OrderBySelector\n                                onChange={this.onYearOrder}\n                                name=\"order_by_year\"\n                            />\n                        </div>\n                    </div>\n                    <div className=\"search_filter xs-12\">\n                        <div className=\"sf_name\">\n                            Filtro por aÃ±o\n                        </div>\n                        <div className=\"sf_filter\">\n                            <Range \n                                min={this.state.min_year} \n                                max={this.state.max_year} \n                                defaultValue={[this.state.min_year, this.state.max_year]} \n                                onChange={this.handle}\n                            />\n                        </div>\n                        <div className=\"sf_value\">\n                            {this.state.filter_from_year} - {this.state.filter_to_year}\n                        </div>\n                    </div>\n                    <div className=\"search_filter xs-12\">\n                        <button onClick={this.submitData} className=\"sf_name\">\n                            Refinar la buscqueda!\n                        </button>\n                    </div>\n                </div>\n                <div className=\"search_results_wrapper col-xs-8\">\n                    <div className=\"search_bar xs-12\">\n                        \n                    </div>\n                    <div className=\"search_results\">\n                        <Table data={this.state.data}/>\n                    </div>\n                </div>\n            </div>\n            <div className=\"search_footer xs-12\">\n            </div>\n\n        </div>\n    );\n\n    }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}