{"ast":null,"code":"import _classCallCheck from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fernando/tfg/portal/reactfront/src/components/generics/imagesReview.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nvar base_url = 'http://127.0.0.1:8000';\n\nvar ImagesReview =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ImagesReview, _Component);\n\n  function ImagesReview(props) {\n    var _this;\n\n    _classCallCheck(this, ImagesReview);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ImagesReview).call(this, props));\n\n    _this.onChangeIndex = function (e) {\n      _this.setState({\n        img_index: e.target.value\n      });\n    };\n\n    _this.state = {\n      entry_id: 9,\n      //this.props.entry_id\n      images: [],\n      img_index: 0,\n      modal_display: 'none',\n      lightbox_display: 'none'\n    };\n    _this.childCloseModal = _this.childCloseModal.bind(_assertThisInitialized(_this));\n    _this.reviewImages = _this.reviewImages.bind(_assertThisInitialized(_this));\n    _this.nextImage = _this.nextImage.bind(_assertThisInitialized(_this));\n    _this.previousImage = _this.previousImage.bind(_assertThisInitialized(_this));\n    _this.onChangeText = _this.onChangeText.bind(_assertThisInitialized(_this));\n    _this.onChangeIndex = _this.onChangeIndex.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ImagesReview, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        modal_display: ''\n      });\n    }\n  }, {\n    key: \"childCloseModal\",\n    value: function childCloseModal() {\n      this.setState({\n        modal_display: 'none',\n        lightbox_display: 'none',\n        entry_id: '',\n        images: []\n      });\n      this.props.closeModal();\n    }\n  }, {\n    key: \"reviewImages\",\n    value: function reviewImages() {\n      var _this2 = this;\n\n      axios.get(\"\".concat(base_url, \"/entry/\").concat(this.state.entry_id, \"/\"), {\n        headers: {\n          'Authorization': \"Token \".concat(localStorage.getItem(\"token\"))\n        }\n      }).then(function (res) {\n        _this2.setState({\n          modal_display: 'none',\n          lightbox_display: '',\n          images: res.data.entry_images\n        });\n      });\n    }\n  }, {\n    key: \"previousImage\",\n    value: function previousImage() {\n      var previousIndex = this.state.img_index === 0 ? 0 : this.state.img_index - 1;\n      this.setState({\n        img_index: previousIndex\n      });\n    }\n  }, {\n    key: \"nextImage\",\n    value: function nextImage() {\n      var nextIndex = this.state.img_index === this.state.images.length ? this.state.images.length : this.state.img_index + 1;\n      this.setState({\n        img_index: nextIndex\n      });\n    }\n  }, {\n    key: \"onChangeText\",\n    value: function onChangeText(e) {\n      var imgs = this.state.images;\n      console.log(\"before\", imgs);\n      imgs[this.state.img_index].text = e.target.value;\n      console.log(\"after\", imgs);\n      this.setState({\n        images: imgs\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(this.state);\n      var style1 = {\n        position: 'fixed',\n        inset: '0px',\n        backgroundColor: 'transparent',\n        zIndex: 1000\n      };\n      var style2 = {\n        position: 'absolute',\n        inset: '0px',\n        border: 'medium none',\n        background: 'transparent none repeat scroll 0% 0%',\n        overflow: 'hidden',\n        borderRadius: '0px',\n        outline: 'currentcolor none medium',\n        padding: '0px'\n      };\n      var style3 = {\n        transition: 'opacity 300ms ease 0s',\n        animationDuration: '300ms',\n        animationDirection: 'reverse'\n      };\n\n      if (!this.state.images) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_entry\",\n        style: {\n          display: this.state.modal_display\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_entry_detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"close\",\n        id: \"btn_close_modal\",\n        \"aria-label\": \"Close\",\n        onClick: this.childCloseModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"\\xD7\")), React.createElement(\"div\", {\n        className: \"row review_confirmation_msg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Registro creado correctamente, \\xBFquieres revisar ahora las imagenes? Si eliges no hacerlo, lo puedes hacer m\\xE1s tarde editando el registro\"), React.createElement(\"div\", {\n        className: \"review_confirmation_btns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        id: \"edit_user_edit\",\n        className: \"btn btn-primary\",\n        onClick: this.reviewImages,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Editar\"), React.createElement(\"button\", {\n        onClick: this.closeModal,\n        type: \"button\",\n        className: \"btn btn-secondary\",\n        \"data-dismiss\": \"modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Cancelar\")))), React.createElement(\"div\", {\n        className: \"reviewWrapper\",\n        style: {\n          display: this.state.lightbox_display\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ReactModal__Overlay ReactModal__Overlay--after-open\",\n        style: style1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: style2,\n        className: \"ReactModal__Content ReactModal__Content--after-open\",\n        tabIndex: \"-1\",\n        role: \"dialog\",\n        \"aria-label\": \"Lightbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, this.state.images.length > 0 ? React.createElement(\"div\", {\n        className: \"ril-outer ril__outer ril__outerAnimating  \",\n        style: style3,\n        tabIndex: \"-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ril-inner ril__inner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"review_modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row review_selector\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        onChange: this.onChangeIndex,\n        value: this.state.img_index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, this.state.images.map(function (x, i) {\n        return React.createElement(\"option\", {\n          value: i,\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, \"Imagen \".concat(i + 1, \" de \").concat(_this3.state.images.length));\n      }))), React.createElement(\"div\", {\n        className: \"row review_content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-6 review_image_image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: base_url + this.state.images[this.state.img_index].image,\n        alt: \"Imagen a revisar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-6 review_image_form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        style: {\n          textAlign: \"left\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Texto de la imagen\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }), React.createElement(\"textarea\", {\n        className: \"edditImage_text\",\n        value: this.state.images[this.state.img_index].text,\n        onChange: this.onChangeText,\n        type: \"text\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Guardar cambios\"), React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Borrar imagen\")))), React.createElement(\"div\", {\n        className: \"row review_generalActions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, this.props.allowAddImage ? React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"A\\xF1adir imagen\") : null, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"Guardar todas las imagenes y salir\")))), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"navigation_btn ril-prev-button ril__navButtons ril__navButtonPrev\",\n        \"aria-label\": \"Previous image\",\n        onClick: this.previousImage,\n        disabled: this.state.img_index === 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"button\",\n        className: \"navigation_btn ril-next-button ril__navButtons ril__navButtonNext\",\n        \"aria-label\": \"Next image\",\n        onClick: this.nextImage,\n        disabled: this.state.img_index === this.state.images.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      })) : null))));\n    }\n  }]);\n\n  return ImagesReview;\n}(Component);\n\nexport default ImagesReview;","map":{"version":3,"sources":["/home/fernando/tfg/portal/reactfront/src/components/generics/imagesReview.js"],"names":["React","Component","axios","base_url","ImagesReview","props","onChangeIndex","e","setState","img_index","target","value","state","entry_id","images","modal_display","lightbox_display","childCloseModal","bind","reviewImages","nextImage","previousImage","onChangeText","closeModal","get","headers","localStorage","getItem","then","res","data","entry_images","previousIndex","nextIndex","length","imgs","console","log","text","style1","position","inset","backgroundColor","zIndex","style2","border","background","overflow","borderRadius","outline","padding","style3","transition","animationDuration","animationDirection","display","map","x","i","image","textAlign","allowAddImage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport axios from 'axios';\n\nconst base_url = 'http://127.0.0.1:8000'\n\nclass ImagesReview extends Component {\n    constructor(props){\n        super(props)\n\n        this.state = {\n            entry_id: 9, //this.props.entry_id\n            images: [],\n            img_index: 0,\n            modal_display: 'none',\n            lightbox_display: 'none',\n        }\n                \n        this.childCloseModal = this.childCloseModal.bind(this);\n \n        this.reviewImages = this.reviewImages.bind(this);\n        this.nextImage = this.nextImage.bind(this);\n        this.previousImage = this.previousImage.bind(this);\n\n        this.onChangeText = this.onChangeText.bind(this);\n        this.onChangeIndex = this.onChangeIndex.bind(this);\n    }\n\n    componentDidMount(){\n        this.setState({\n            modal_display: '',\n        })\n    }\n\n    childCloseModal(){\n        this.setState({\n            modal_display: 'none',\n            lightbox_display: 'none',\n            entry_id: '',\n            images: [],\n\n        });\n        this.props.closeModal();\n    }\n\n\n    reviewImages(){\n        axios.get(`${base_url}/entry/${this.state.entry_id}/`,\n            {\n                headers: {\n                    'Authorization': `Token ${localStorage.getItem(\"token\")}`,\n                }\n            }\n        ).then(\n            res => {\n                this.setState({\n                    modal_display: 'none',\n                    lightbox_display: '',\n                    images: res.data.entry_images,\n                })\n            }\n        )\n    }\n\n    previousImage() {\n        const previousIndex = this.state.img_index === 0\n                    ? 0\n                    : this.state.img_index - 1;\n\n        this.setState({\n            img_index: previousIndex,\n        })\n    }\n\n    nextImage() {\n        const nextIndex = this.state.img_index === this.state.images.length\n                    ? this.state.images.length\n                    : this.state.img_index + 1;\n\n        this.setState({\n            img_index: nextIndex,\n        })\n    }\n\n    onChangeText(e) {\n        var imgs = this.state.images;\n\n        console.log(\"before\", imgs);\n\n        imgs[this.state.img_index].text = e.target.value;\n\n        console.log(\"after\", imgs);\n\n        this.setState({\n            images: imgs,\n        })\n    }\n\n    onChangeIndex = (e) => {\n        this.setState({\n            img_index: e.target.value,\n        })\n    }\n\n    render() {\n\n        console.log(this.state);\n     \n        const style1 = {position: 'fixed', inset: '0px', backgroundColor: 'transparent', zIndex: 1000}\n        const style2 = {position: 'absolute', inset: '0px', border: 'medium none', background: 'transparent none repeat scroll 0% 0%', overflow: 'hidden', borderRadius: '0px', outline: 'currentcolor none medium', padding: '0px'}\n        const style3 = {transition: 'opacity 300ms ease 0s', animationDuration: '300ms', animationDirection: 'reverse'}\n        \n        if(!this.state.images){\n            return <div></div>\n        }\n\n        return(\n\n            <div>\n                <div className=\"modal_entry\"\n                    style={{display:this.state.modal_display}}\n                    >\n                    <div className=\"modal_entry_detail\">\n                        <button type=\"button\" \n                                className=\"close\" \n                                id=\"btn_close_modal\" \n                                aria-label=\"Close\" \n                                onClick={this.childCloseModal}>\n\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                        <div className=\"row review_confirmation_msg\">\n                            Registro creado correctamente, ¿quieres revisar ahora las imagenes?\n                            Si eliges no hacerlo, lo puedes hacer más tarde editando el registro\n                        </div>\n                        <div className=\"review_confirmation_btns\">\n                            <button type=\"button\" \n                                    id=\"edit_user_edit\"\n                                    className=\"btn btn-primary\" \n                                    onClick={this.reviewImages}>\n                                    Editar \n                                    </button>\n\n                            <button onClick={this.closeModal} \n                                    type=\"button\" \n                                    className=\"btn btn-secondary\" \n                                    data-dismiss=\"modal\">\n                                    Cancelar\n                                    </button>\n                        </div>\n                        \n                    </div>\n                </div>\n\n                <div className=\"reviewWrapper\" \n                    style={{display: this.state.lightbox_display}}\n                    >\n                    <div className=\"ReactModal__Overlay ReactModal__Overlay--after-open\" \n                        style={style1}>\n\n                        <div style={style2} \n                             className=\"ReactModal__Content ReactModal__Content--after-open\" \n                             tabIndex=\"-1\" \n                             role=\"dialog\" \n                             aria-label=\"Lightbox\">\n\n\n                        {\n                            this.state.images.length > 0\n                            ? <div className=\"ril-outer ril__outer ril__outerAnimating  \" \n                                style={style3} \n                                tabIndex=\"-1\">\n                        \n\n                                <div className=\"ril-inner ril__inner\">\n                                    <div className=\"review_modal\"> \n                                        <div className=\"row review_selector\">\n                                        {/* pagination */}\n                                            <select\n                                                onChange={this.onChangeIndex}\n                                                value={this.state.img_index}\n                                                >\n                                                {this.state.images.map((x, i) => (\n                                                    <option value={i}\n                                                            key={i}\n                                                            >\n                                                        {`Imagen ${i+1} de ${this.state.images.length}`}\n                                                    </option> \n                                                ))}\n                                            </select>\n                                        </div>\n                                        <div className=\"row review_content\">\n                                            {/* content */}\n                                            <div className=\"col-6 review_image_image\">\n                                                <img src={base_url + this.state.images[this.state.img_index].image}\n                                                    alt=\"Imagen a revisar\" />\n                                            </div>\n                                            <div className=\"col-6 review_image_form\">\n                                                <form>\n                                                    <label style={{textAlign: \"left\"}}>Texto de la imagen</label>\n                                                    <br/>\n                                                    <textarea  className=\"edditImage_text\"\n                                                            value={this.state.images[this.state.img_index].text}\n                                                            onChange={this.onChangeText}\n                                                            type=\"text\"\n                                                            required\n                                                            />\n\n                                                    <button>Guardar cambios</button>\n                                                    <button>Borrar imagen</button>\n                                                </form>\n                                            </div>\n                                        </div>\n                                        <div className=\"row review_generalActions\">\n                                            {/* general buttons */}\n                                            { this.props.allowAddImage\n                                                ? <button>Añadir imagen</button>\n                                                : null\n                                            }\n                                            <button>Guardar todas las imagenes y salir</button>\n                                        </div>\n                                    </div>\n                                </div>\n                                \n                                <button type=\"button\" \n                                        className=\"navigation_btn ril-prev-button ril__navButtons ril__navButtonPrev\" \n                                        aria-label=\"Previous image\"\n                                        onClick={this.previousImage}\n                                        disabled={\n                                            this.state.img_index === 0\n                                        }\n                                        >\n                                        </button>\n                                <button type=\"button\" \n                                        className=\"navigation_btn ril-next-button ril__navButtons ril__navButtonNext\" \n                                        aria-label=\"Next image\"\n                                        onClick={this.nextImage}\n                                        disabled={\n                                            this.state.img_index === this.state.images.length\n                                        }\n                                        >\n                                        </button>\n                        \n                                </div>\n\n                            : null\n                        }\n                            \n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default ImagesReview;"]},"metadata":{},"sourceType":"module"}