{"ast":null,"code":"import _objectWithoutProperties from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fernando/tfg/portal/reactfront/src/components/search.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Header from './generics/header';\nimport Table from './generics/table';\nimport 'rc-slider/assets/index.css';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport Slider from 'rc-slider';\nimport { Button } from 'antd';\nimport { Slider as Slyder, Switch } from 'antd';\nvar createSliderWithTooltip = Slider.createSliderWithTooltip;\nvar Range = createSliderWithTooltip(Slider.Range);\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search(_props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, _props));\n\n    _this.handle = function (props) {\n      var value = props.value,\n          dragging = props.dragging,\n          index = props.index,\n          restProps = _objectWithoutProperties(props, [\"value\", \"dragging\", \"index\"]);\n\n      _this.setState({\n        filter_from_year: props[0],\n        filter_to_year: props[1]\n      });\n    };\n\n    _this.state = {\n      data: _props.location.state.detail,\n      query_text: '',\n      filter_author: '',\n      filter_from_year: '',\n      filter_to_year: '',\n      order_by_year: '',\n      order_by_author: '',\n      order_by_title: '',\n      page: '',\n      page_size: '',\n      isLoggedIn: true,\n      searchResults: _this.props.location.state.detail.data,\n      authors: [],\n      min_year: '',\n      max_year: ''\n    };\n    _this.headers = [{\n      label: \"Titulo\",\n      id: \"title\",\n      numeric: false,\n      disablePadding: true\n    }, {\n      label: \"Autor\",\n      id: \"author\",\n      numeric: false,\n      disablePadding: true\n    }, {\n      label: \"AÃ±o\",\n      id: \"year\",\n      numeric: true,\n      disablePadding: true\n    }, {\n      label: \"Imagenes\",\n      id: \"entry_images\",\n      numeric: false,\n      disablePadding: true\n    }];\n    _this.handle = _this.handle.bind();\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      axios.get('http://127.0.0.1:8000/rest_entry', {\n        parms: {\n          page_size: 50,\n          q: this.state.query_text\n        }\n      }).then(function (res) {\n        _this2.setState({\n          data: res.data\n        });\n      });\n      axios.get('http://127.0.0.1:8000/entry_meta').then(function (res) {\n        _this2.setState({\n          authors: res.data.authors,\n          min_year: res.data.min_year,\n          max_year: res.data.max_year\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"search_wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(Header, {\n        isLoggedIn: this.state.isLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"search_body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_filters col-xs-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Year filter\"), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Author filter\"), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Order by author\"), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Order by title\"), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Order by year\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Range, {\n        min: 0,\n        max: 20,\n        defaultValue: [3, 10],\n        marks: {\n          0: 0,\n          20: 20\n        },\n        onChange: this.handle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), React.createElement(Slyder, {\n        range: true,\n        defaultValue: [20, 50],\n        disabled: disabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"sf_value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Refinar la buscqueda!\"))), React.createElement(\"div\", {\n        className: \"search_results_wrapper col-xs-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_bar xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"search_results\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(Table, {\n        data: this.state.data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"search_footer xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default Search;","map":{"version":3,"sources":["/home/fernando/tfg/portal/reactfront/src/components/search.js"],"names":["React","Component","axios","Header","Table","Slider","Button","Slyder","Switch","createSliderWithTooltip","Range","Search","props","handle","value","dragging","index","restProps","setState","filter_from_year","filter_to_year","state","data","location","detail","query_text","filter_author","order_by_year","order_by_author","order_by_title","page","page_size","isLoggedIn","searchResults","authors","min_year","max_year","headers","label","id","numeric","disablePadding","bind","get","parms","q","then","res","disabled"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport axios from 'axios';\n\nimport Header from './generics/header'\nimport Table from './generics/table'\n\n\nimport 'rc-slider/assets/index.css';\nimport 'rc-tooltip/assets/bootstrap.css';\n\nimport Slider from 'rc-slider';\nimport { Button } from 'antd';\n\nimport { Slider as Slyder, Switch } from 'antd';\n\n\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\nconst Range = createSliderWithTooltip(Slider.Range);\n\nclass Search extends Component {\n\n    constructor(props){\n        super(props)\n\n        this.state = {\n            data: props.location.state.detail,\n            query_text: '',\n            \n            filter_author: '',\n            filter_from_year: '',\n            filter_to_year: '',\n            \n            order_by_year: '',\n            order_by_author: '',\n            order_by_title: '',\n\n            page: '',\n            page_size: '',\n\n            isLoggedIn: true,\n\n            searchResults: this.props.location.state.detail.data,\n            authors: [],\n            min_year: '',\n            max_year: '',\n        }\n\n        this.headers = [\n                {label: \"Titulo\", id: \"title\", numeric: false, disablePadding: true},\n                {label: \"Autor\", id: \"author\", numeric: false, disablePadding: true},\n                {label: \"AÃ±o\", id: \"year\", numeric: true, disablePadding: true},\n                {label: \"Imagenes\", id: \"entry_images\", numeric: false, disablePadding: true},\n            ];\n\n        this.handle = this.handle.bind()\n    }\n  \n    componentWillMount(){\n        axios.get('http://127.0.0.1:8000/rest_entry', {\n            parms: {\n                page_size: 50,\n                q: this.state.query_text,\n            }\n        })\n        .then(\n            res => {\n                this.setState({data: res.data})\n            }\n        )\n\n        axios.get('http://127.0.0.1:8000/entry_meta').then(\n            res => {\n                this.setState({\n                    authors: res.data.authors,\n                    min_year: res.data.min_year,\n                    max_year: res.data.max_year\n                })\n            }\n        )\n    }\n\n    handle = (props) => {\n        const { value, dragging, index, ...restProps } = props;\n            this.setState({\n                filter_from_year: props[0],\n                filter_to_year: props[1],\n            })            \n    };\n\n  render() {\n    return (\n        <div className=\"search_wrapper\">\n            <div className=\"search_header\">\n                <Header isLoggedIn={this.state.isLoggedIn}/>\n            </div>\n            <div className=\"search_body\">\n                <div className=\"search_filters col-xs-4\">\n                    <div className=\"search_filter xs-12\">Year filter</div>\n                    <div className=\"search_filter xs-12\">Author filter</div>\n                    <div className=\"search_filter xs-12\">Order by author</div>\n                    <div className=\"search_filter xs-12\">Order by title</div>\n                    <div className=\"search_filter xs-12\">\n                        <div className=\"sf_name\">\n                            Order by year\n                        </div>\n                        <div className=\"sf_filter\">\n                            <Range \n                                min={0} \n                                max={20} \n                                defaultValue={[3, 10]} \n                                marks={{ 0: 0, 20: 20 }}\n                                onChange={this.handle}\n                            />\n\n                            <Slyder range defaultValue={[20, 50]} disabled={disabled} />\n                        </div>\n                        <div className=\"sf_value\">\n\n                        </div>\n                    </div>\n                    <div className=\"search_filter xs-12\">\n                        <button className=\"sf_name\">\n                            Refinar la buscqueda!\n                        </button>\n                    </div>\n                </div>\n                <div className=\"search_results_wrapper col-xs-8\">\n                    <div className=\"search_bar xs-12\">\n                        \n                    </div>\n                    <div className=\"search_results\">\n                        <Table data={this.state.data}/>\n                    </div>\n                </div>\n            </div>\n            <div className=\"search_footer xs-12\">\n            </div>\n\n        </div>\n    );\n\n    }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}