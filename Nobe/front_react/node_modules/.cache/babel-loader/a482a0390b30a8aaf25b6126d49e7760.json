{"ast":null,"code":"import _classCallCheck from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fernando/tfg/portal/reactfront/src/components/search.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Header from './generics/header';\nimport 'rc-slider/assets/index.css';\nimport 'rc-tooltip/assets/bootstrap.css';\nimport Slider from 'rc-slider';\nimport { EntriesList, AuthorList, OrderBySelector } from './generics/searchGenerics';\nimport Lightbox from 'react-image-lightbox';\nimport 'react-image-lightbox/style.css';\nvar createSliderWithTooltip = Slider.createSliderWithTooltip;\nvar Range = createSliderWithTooltip(Slider.Range);\n\nvar Button = function Button(_ref) {\n  var name = _ref.name,\n      disabled = _ref.disabled,\n      onClick = _ref.onClick;\n  return React.createElement(\"button\", {\n    className: disabled ? name + \" disabled_pagination\" : name,\n    disabled: disabled,\n    onClick: onClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  });\n}; // Due to setState delay issues, variable managed on a higher level\n\n\nvar page = 0;\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search(_props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, _props));\n\n    _this.handle = function (props) {\n      _this.setState({\n        filter_from_year: props[0],\n        filter_to_year: props[1]\n      });\n    };\n\n    _this.handleInputChange = function (e) {\n      _this.setState({\n        query_text: e.target.value\n      });\n    };\n\n    _this.onAuthorSelect = function (e) {\n      _this.setState({\n        filter_author: e.target.value\n      });\n    };\n\n    _this.onAuthorOrder = function (e) {\n      _this.setState({\n        order_by_author: e.target.value\n      });\n    };\n\n    _this.onTitleOrder = function (e) {\n      _this.setState({\n        order_by_title: e.target.value\n      });\n    };\n\n    _this.onYearOrder = function (e) {\n      _this.setState({\n        order_by_year: e.target.value\n      });\n    };\n\n    _this.onEntryClick = function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      var entry = _this.state.data.entries.find(function (entry) {\n        return entry.id === parseInt(e.currentTarget.getAttribute(\"data-id\"));\n      });\n\n      _this.setState({\n        modal_title: entry.title,\n        modal_year: entry.year,\n        modal_author: entry.author,\n        modal_images: entry.entry_images,\n        modal_display: ''\n      });\n    };\n\n    console.log(\"props\", _props);\n    _this.state = {\n      data: _props.location.state.detail ? _props.location.state.detail : {},\n      query_text: _props.location.state.query,\n      filter_author: '',\n      filter_from_year: '',\n      filter_to_year: '',\n      order_by_year: '',\n      order_by_author: '',\n      order_by_title: '',\n      isLoggedIn: true,\n      author: '',\n      min_year: '',\n      max_year: '',\n      page_size: 5,\n      base_url: _props.location.state.base_url,\n      total_elements: _props.location.state.detail.total,\n      waiting_to_change: false,\n      modal_display: 'none',\n      modal_title: '',\n      modal_year: '',\n      modal_author: '',\n      modal_images: [],\n      img_detail_display: 'none',\n      img_detail_src: '',\n      photoIndex: 0,\n      isLightBoxOpen: false\n    };\n    _this.headers = [{\n      label: \"Titulo\",\n      id: \"title\",\n      numeric: false,\n      disablePadding: true\n    }, {\n      label: \"Autor\",\n      id: \"author\",\n      numeric: false,\n      disablePadding: true\n    }, {\n      label: \"Año\",\n      id: \"year\",\n      numeric: true,\n      disablePadding: true\n    }, {\n      label: \"Imagenes\",\n      id: \"entry_images\",\n      numeric: false,\n      disablePadding: true\n    }];\n    _this.handle = _this.handle.bind();\n    _this.onAuthorSelect = _this.onAuthorSelect.bind(_assertThisInitialized(_this));\n    _this.onAuthorOrder = _this.onAuthorOrder.bind(_assertThisInitialized(_this));\n    _this.onTitleOrder = _this.onTitleOrder.bind(_assertThisInitialized(_this));\n    _this.onYearOrder = _this.onYearOrder.bind(_assertThisInitialized(_this));\n    _this.fetchData = _this.fetchData.bind(_assertThisInitialized(_this));\n    _this.onPreviousPage = _this.onPreviousPage.bind(_assertThisInitialized(_this));\n    _this.onNextPage = _this.onNextPage.bind(_assertThisInitialized(_this));\n    _this.onEntryClick = _this.onEntryClick.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    _this.handleInputChange = _this.handleInputChange.bind(_assertThisInitialized(_this));\n    _this.showCarrousel = _this.showCarrousel.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this2 = this;\n\n      this.setState({\n        total_elements: '',\n        waiting_to_change: true\n      });\n      axios.get(this.state.base_url + '/entry/', {\n        params: {\n          page_size: this.state.page_size,\n          page: page,\n          q: this.state.query_text,\n          order_year: this.state.order_by_year,\n          order_author: this.state.order_by_author,\n          order_title: this.state.order_by_title,\n          from_year: this.state.filter_from_year,\n          to_year: this.state.filter_to_year,\n          author: this.state.filter_author\n        }\n      }).then(function (res) {\n        _this2.setState({\n          data: res.data,\n          total_elements: res.data.total,\n          waiting_to_change: false\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      axios.get(this.state.base_url + '/entry_meta').then(function (res) {\n        _this3.setState({\n          authors: res.data.authors,\n          min_year: parseInt(res.data.min_year),\n          max_year: parseInt(res.data.max_year),\n          filter_from_year: parseInt(res.data.min_year),\n          filter_to_year: parseInt(res.data.max_year)\n        });\n      });\n    }\n  }, {\n    key: \"onNextPage\",\n    value: function onNextPage() {\n      page += 1;\n      this.fetchData();\n    }\n  }, {\n    key: \"onPreviousPage\",\n    value: function onPreviousPage() {\n      page -= 1;\n      this.fetchData();\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        modal_display: 'none',\n        modal_title: '',\n        modal_year: '',\n        modal_author: '',\n        modal_images: [],\n        img_detail_display: 'none',\n        img_detail_src: ''\n      });\n    }\n  }, {\n    key: \"showCarrousel\",\n    value: function showCarrousel(index) {\n      this.setState({\n        isLightBoxOpen: true,\n        photoIndex: index\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var img_leng = this.state.modal_images.length;\n      var photoIndex = this.state.photoIndex;\n\n      if (this.state.min_year === '' || !this.state.max_year === '' || this.state.total_elements === '') {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        });\n      }\n\n      if (this.state.waiting_to_change) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"search_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_entry\",\n        style: {\n          display: this.state.modal_display\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_img_detail\",\n        style: {\n          display: this.state.img_detail_display\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, this.state.isLightBoxOpen && React.createElement(Lightbox, {\n        mainSrc: this.state.base_url + this.state.modal_images[photoIndex].image,\n        nextSrc: this.state.base_url + this.state.modal_images[img_leng > 1 ? (photoIndex + 1) % img_leng : 0].image,\n        prevSrc: this.state.base_url + this.state.modal_images[img_leng > 1 ? (photoIndex + img_leng - 1) % img_leng : 0].image,\n        onCloseRequest: function onCloseRequest() {\n          return _this4.setState({\n            isLightBoxOpen: false\n          });\n        },\n        onMovePrevRequest: function onMovePrevRequest() {\n          return _this4.setState({\n            photoIndex: (photoIndex + img_leng - 1) % img_leng\n          });\n        },\n        onMoveNextRequest: function onMoveNextRequest() {\n          return _this4.setState({\n            photoIndex: (photoIndex + 1) % img_leng\n          });\n        },\n        clickOutsideToClose: true,\n        wrapperClassName: this.state.data.image_ids && this.state.data.image_ids.includes(this.state.modal_images[photoIndex].id) ? \"result_found\" : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"modal_entry_detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"close\",\n        id: \"btn_close_modal\",\n        \"aria-label\": \"Close\",\n        onClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, \"\\xD7\")), React.createElement(\"div\", {\n        className: \"entry_flex_wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"m_data row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, \"Vista de registro detallada\")), React.createElement(\"div\", {\n        className: \"m_data row m_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, \"T\\xEDtulo: \", this.state.modal_title), React.createElement(\"div\", {\n        className: \"m_data row m_author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"Author: \", this.state.modal_author), React.createElement(\"div\", {\n        className: \"m_data row m_year\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, \"A\\xF1o: \", this.state.modal_year), React.createElement(\"div\", {\n        className: \"m_data row m_imagenes_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, \"Imagenes\"), React.createElement(\"div\", {\n        className: \"m_data row m_images\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"m_imagenes_imgs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, this.state.modal_images.map(function (img) {\n        return React.createElement(\"div\", {\n          key: img.id,\n          className: \"modalImageDetail\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 277\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          alt: \"\",\n          className: _this4.state.data.image_ids && _this4.state.data.image_ids.includes(img.id) ? \"eid_image result_found\" : \"eid_image \",\n          id: img.id,\n          src: _this4.state.base_url + img.image,\n          onClick: function onClick() {\n            return _this4.showCarrousel(_this4.state.modal_images.indexOf(img));\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }));\n      })))))), React.createElement(\"div\", {\n        className: \"search_wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, React.createElement(Header, {\n        isLoggedIn: this.state.isLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"search_body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_filters col-xs-4 col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_category xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, \"Filtros\"), React.createElement(\"div\", {\n        className: \"search_filter sf_border_bottom xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, \"Autor\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, React.createElement(AuthorList, {\n        onChange: this.onAuthorSelect,\n        authors: this.state.authors,\n        value: this.state.filter_author,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, \"Filtro por a\\xF1o\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, React.createElement(Range, {\n        min: this.state.min_year,\n        max: this.state.max_year,\n        defaultValue: [this.state.filter_from_year, this.state.filter_to_year],\n        onChange: this.handle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"sf_value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, this.state.filter_from_year, \" - \", this.state.filter_to_year)), React.createElement(\"div\", {\n        className: \"sf_category xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, \"Ordenar por...\"), React.createElement(\"div\", {\n        className: \"search_filter sf_border_bottom xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, \"Autor\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onAuthorOrder,\n        name: \"order_by_author\",\n        value: this.state.order_by_author,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter sf_border_bottom xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352\n        },\n        __self: this\n      }, \"T\\xEDtulo\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onTitleOrder,\n        name: \"order_by_title\",\n        value: this.state.order_by_title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, \"A\\xF1o\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onYearOrder,\n        name: \"order_by_year\",\n        value: this.state.order_by_year,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.fetchData,\n        className: \"sf_name filter_btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }, \"Refinar la busqueda!\"))), React.createElement(\"div\", {\n        className: \"search_results_wrapper col-xs-8 col-md-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_results\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sr_searchbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: this.handleInputChange,\n        type: \"text\",\n        id: \"searchBarSearch\",\n        className: \"form-control col-xs-9 display_inline_block\",\n        value: this.state.query_text,\n        onKeyPress: function onKeyPress(e) {\n          if (e.key === 'Enter') {\n            _this4.fetchData();\n          }\n        },\n        required: \"\",\n        autoFocus: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"input-group-btn col-xs-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.fetchData,\n        className: \"btn btn-search\",\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-search fa-fw display_inline_block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      })))), React.createElement(EntriesList, {\n        editDelete: false,\n        resultOnImgs: this.state.data.image_ids,\n        entries: this.state.data.entries,\n        base_url: this.state.base_url,\n        onClick: this.onEntryClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404\n        },\n        __self: this\n      }), this.state.total_elements > 0 ? React.createElement(\"div\", {\n        className: \"pagination_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"total_elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }, page * this.state.page_size + 1, \" - \", Math.min(this.state.total_elements, (1 + page) * this.state.page_size), \" de \", this.state.total_elements), React.createElement(Button, {\n        name: \"previous_page_btn\",\n        disabled: page + 1 === 1,\n        onClick: this.onPreviousPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414\n        },\n        __self: this\n      }), React.createElement(Button, {\n        name: \"next_page_btn\",\n        disabled: page + 1 === Math.ceil(this.state.total_elements / this.state.page_size),\n        onClick: this.onNextPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"search_footer xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default Search;","map":{"version":3,"sources":["/home/fernando/tfg/portal/reactfront/src/components/search.js"],"names":["React","Component","axios","Header","Slider","EntriesList","AuthorList","OrderBySelector","Lightbox","createSliderWithTooltip","Range","Button","name","disabled","onClick","page","Search","props","handle","setState","filter_from_year","filter_to_year","handleInputChange","e","query_text","target","value","onAuthorSelect","filter_author","onAuthorOrder","order_by_author","onTitleOrder","order_by_title","onYearOrder","order_by_year","onEntryClick","stopPropagation","preventDefault","entry","state","data","entries","find","id","parseInt","currentTarget","getAttribute","modal_title","title","modal_year","year","modal_author","author","modal_images","entry_images","modal_display","console","log","location","detail","query","isLoggedIn","min_year","max_year","page_size","base_url","total_elements","total","waiting_to_change","img_detail_display","img_detail_src","photoIndex","isLightBoxOpen","headers","label","numeric","disablePadding","bind","fetchData","onPreviousPage","onNextPage","closeModal","showCarrousel","get","params","q","order_year","order_author","order_title","from_year","to_year","then","res","authors","index","img_leng","length","display","image","image_ids","includes","map","img","indexOf","key","Math","min","ceil"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,OAAO,4BAAP;AACA,OAAO,iCAAP;AAEA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,SAASC,WAAT,EAAsBC,UAAtB,EAAkCC,eAAlC,QAAyD,2BAAzD;AAEA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAO,gCAAP;AAGA,IAAMC,uBAAuB,GAAGL,MAAM,CAACK,uBAAvC;AACA,IAAMC,KAAK,GAAGD,uBAAuB,CAACL,MAAM,CAACM,KAAR,CAArC;;AAEA,IAAMC,MAAM,GAAG,SAATA,MAAS;AAAA,MAAEC,IAAF,QAAEA,IAAF;AAAA,MAAQC,QAAR,QAAQA,QAAR;AAAA,MAAkBC,OAAlB,QAAkBA,OAAlB;AAAA,SAEX;AACI,IAAA,SAAS,EAAGD,QAAQ,GAAGD,IAAI,GAAG,sBAAV,GAAmCA,IAD3D;AAEI,IAAA,QAAQ,EAAEC,QAFd;AAGI,IAAA,OAAO,EAAEC,OAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFW;AAAA,CAAf,C,CASA;;;AACA,IAAIC,IAAI,GAAG,CAAX;;IAEMC,M;;;;;AAEF,kBAAYC,MAAZ,EAAkB;AAAA;;AAAA;;AACd,gFAAMA,MAAN;;AADc,UA0GlBC,MA1GkB,GA0GT,UAACD,KAAD,EAAW;AAChB,YAAKE,QAAL,CAAc;AACVC,QAAAA,gBAAgB,EAAEH,KAAK,CAAC,CAAD,CADb;AAEVI,QAAAA,cAAc,EAAEJ,KAAK,CAAC,CAAD;AAFX,OAAd;AAIH,KA/GiB;;AAAA,UAiHlBK,iBAjHkB,GAiHE,UAACC,CAAD,EAAO;AACvB,YAAKJ,QAAL,CAAc;AAACK,QAAAA,UAAU,EAAED,CAAC,CAACE,MAAF,CAASC;AAAtB,OAAd;AACH,KAnHiB;;AAAA,UAqHlBC,cArHkB,GAqHD,UAACJ,CAAD,EAAO;AACpB,YAAKJ,QAAL,CAAc;AAACS,QAAAA,aAAa,EAAEL,CAAC,CAACE,MAAF,CAASC;AAAzB,OAAd;AACH,KAvHiB;;AAAA,UAyHlBG,aAzHkB,GAyHF,UAACN,CAAD,EAAO;AACnB,YAAKJ,QAAL,CAAc;AAACW,QAAAA,eAAe,EAAEP,CAAC,CAACE,MAAF,CAASC;AAA3B,OAAd;AACH,KA3HiB;;AAAA,UA6HlBK,YA7HkB,GA6HH,UAACR,CAAD,EAAO;AAClB,YAAKJ,QAAL,CAAc;AAACa,QAAAA,cAAc,EAAET,CAAC,CAACE,MAAF,CAASC;AAA1B,OAAd;AACH,KA/HiB;;AAAA,UAiIlBO,WAjIkB,GAiIJ,UAACV,CAAD,EAAO;AACjB,YAAKJ,QAAL,CAAc;AAACe,QAAAA,aAAa,EAAEX,CAAC,CAACE,MAAF,CAASC;AAAzB,OAAd;AACH,KAnIiB;;AAAA,UA+IlBS,YA/IkB,GA+IH,UAACZ,CAAD,EAAO;AAClBA,MAAAA,CAAC,CAACa,eAAF;AACAb,MAAAA,CAAC,CAACc,cAAF;;AAEA,UAAIC,KAAK,GAAG,MAAKC,KAAL,CAAWC,IAAX,CAAgBC,OAAhB,CAAwBC,IAAxB,CACA,UAAAJ,KAAK;AAAA,eAAIA,KAAK,CAACK,EAAN,KAAaC,QAAQ,CAACrB,CAAC,CAACsB,aAAF,CAAgBC,YAAhB,CAA6B,SAA7B,CAAD,CAAzB;AAAA,OADL,CAAZ;;AAGA,YAAK3B,QAAL,CAAc;AACV4B,QAAAA,WAAW,EAAET,KAAK,CAACU,KADT;AAEVC,QAAAA,UAAU,EAAEX,KAAK,CAACY,IAFR;AAGVC,QAAAA,YAAY,EAAEb,KAAK,CAACc,MAHV;AAIVC,QAAAA,YAAY,EAAEf,KAAK,CAACgB,YAJV;AAKVC,QAAAA,aAAa,EAAE;AALL,OAAd;AAOH,KA7JiB;;AAGdC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBxC,MAArB;AAEA,UAAKsB,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAEvB,MAAK,CAACyC,QAAN,CAAenB,KAAf,CAAqBoB,MAArB,GAA8B1C,MAAK,CAACyC,QAAN,CAAenB,KAAf,CAAqBoB,MAAnD,GAA4D,EADzD;AAETnC,MAAAA,UAAU,EAAEP,MAAK,CAACyC,QAAN,CAAenB,KAAf,CAAqBqB,KAFxB;AAIThC,MAAAA,aAAa,EAAE,EAJN;AAKTR,MAAAA,gBAAgB,EAAE,EALT;AAMTC,MAAAA,cAAc,EAAE,EANP;AAQTa,MAAAA,aAAa,EAAE,EARN;AASTJ,MAAAA,eAAe,EAAE,EATR;AAUTE,MAAAA,cAAc,EAAE,EAVP;AAYT6B,MAAAA,UAAU,EAAE,IAZH;AAcTT,MAAAA,MAAM,EAAI,EAdD;AAeTU,MAAAA,QAAQ,EAAE,EAfD;AAgBTC,MAAAA,QAAQ,EAAE,EAhBD;AAkBTC,MAAAA,SAAS,EAAE,CAlBF;AAoBTC,MAAAA,QAAQ,EAAEhD,MAAK,CAACyC,QAAN,CAAenB,KAAf,CAAqB0B,QApBtB;AAqBTC,MAAAA,cAAc,EAAEjD,MAAK,CAACyC,QAAN,CAAenB,KAAf,CAAqBoB,MAArB,CAA4BQ,KArBnC;AAuBTC,MAAAA,iBAAiB,EAAE,KAvBV;AAyBTb,MAAAA,aAAa,EAAE,MAzBN;AA0BTR,MAAAA,WAAW,EAAE,EA1BJ;AA2BTE,MAAAA,UAAU,EAAE,EA3BH;AA4BTE,MAAAA,YAAY,EAAE,EA5BL;AA6BTE,MAAAA,YAAY,EAAE,EA7BL;AA8BTgB,MAAAA,kBAAkB,EAAE,MA9BX;AA+BTC,MAAAA,cAAc,EAAE,EA/BP;AAgCTC,MAAAA,UAAU,EAAE,CAhCH;AAiCTC,MAAAA,cAAc,EAAE;AAjCP,KAAb;AAoCA,UAAKC,OAAL,GAAe,CACP;AAACC,MAAAA,KAAK,EAAE,QAAR;AAAkB/B,MAAAA,EAAE,EAAE,OAAtB;AAA+BgC,MAAAA,OAAO,EAAE,KAAxC;AAA+CC,MAAAA,cAAc,EAAE;AAA/D,KADO,EAEP;AAACF,MAAAA,KAAK,EAAE,OAAR;AAAiB/B,MAAAA,EAAE,EAAE,QAArB;AAA+BgC,MAAAA,OAAO,EAAE,KAAxC;AAA+CC,MAAAA,cAAc,EAAE;AAA/D,KAFO,EAGP;AAACF,MAAAA,KAAK,EAAE,KAAR;AAAe/B,MAAAA,EAAE,EAAE,MAAnB;AAA2BgC,MAAAA,OAAO,EAAE,IAApC;AAA0CC,MAAAA,cAAc,EAAE;AAA1D,KAHO,EAIP;AAACF,MAAAA,KAAK,EAAE,UAAR;AAAoB/B,MAAAA,EAAE,EAAE,cAAxB;AAAwCgC,MAAAA,OAAO,EAAE,KAAjD;AAAwDC,MAAAA,cAAc,EAAE;AAAxE,KAJO,CAAf;AAOA,UAAK1D,MAAL,GAAc,MAAKA,MAAL,CAAY2D,IAAZ,EAAd;AACA,UAAKlD,cAAL,GAAsB,MAAKA,cAAL,CAAoBkD,IAApB,+BAAtB;AACA,UAAKhD,aAAL,GAAqB,MAAKA,aAAL,CAAmBgD,IAAnB,+BAArB;AACA,UAAK9C,YAAL,GAAoB,MAAKA,YAAL,CAAkB8C,IAAlB,+BAApB;AACA,UAAK5C,WAAL,GAAmB,MAAKA,WAAL,CAAiB4C,IAAjB,+BAAnB;AAEA,UAAKC,SAAL,GAAiB,MAAKA,SAAL,CAAeD,IAAf,+BAAjB;AACA,UAAKE,cAAL,GAAsB,MAAKA,cAAL,CAAoBF,IAApB,+BAAtB;AACA,UAAKG,UAAL,GAAkB,MAAKA,UAAL,CAAgBH,IAAhB,+BAAlB;AACA,UAAK1C,YAAL,GAAoB,MAAKA,YAAL,CAAkB0C,IAAlB,+BAApB;AACA,UAAKI,UAAL,GAAkB,MAAKA,UAAL,CAAgBJ,IAAhB,+BAAlB;AACA,UAAKvD,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBuD,IAAvB,+BAAzB;AAEA,UAAKK,aAAL,GAAqB,MAAKA,aAAL,CAAmBL,IAAnB,+BAArB;AA7Dc;AA8DjB;;;;gCAEU;AAAA;;AACP,WAAK1D,QAAL,CAAc;AAAC+C,QAAAA,cAAc,EAAC,EAAhB;AAAoBE,QAAAA,iBAAiB,EAAC;AAAtC,OAAd;AAEAlE,MAAAA,KAAK,CAACiF,GAAN,CAAU,KAAK5C,KAAL,CAAW0B,QAAX,GAAsB,SAAhC,EACA;AACImB,QAAAA,MAAM,EAAE;AACJpB,UAAAA,SAAS,EAAE,KAAKzB,KAAL,CAAWyB,SADlB;AAEJjD,UAAAA,IAAI,EAAEA,IAFF;AAGJsE,UAAAA,CAAC,EAAE,KAAK9C,KAAL,CAAWf,UAHV;AAIJ8D,UAAAA,UAAU,EAAE,KAAK/C,KAAL,CAAWL,aAJnB;AAKJqD,UAAAA,YAAY,EAAE,KAAKhD,KAAL,CAAWT,eALrB;AAMJ0D,UAAAA,WAAW,EAAE,KAAKjD,KAAL,CAAWP,cANpB;AAOJyD,UAAAA,SAAS,EAAE,KAAKlD,KAAL,CAAWnB,gBAPlB;AAQJsE,UAAAA,OAAO,EAAE,KAAKnD,KAAL,CAAWlB,cARhB;AASJ+B,UAAAA,MAAM,EAAE,KAAKb,KAAL,CAAWX;AATf;AADZ,OADA,EAcC+D,IAdD,CAeI,UAAAC,GAAG,EAAI;AACH,QAAA,MAAI,CAACzE,QAAL,CAAc;AACVqB,UAAAA,IAAI,EAAEoD,GAAG,CAACpD,IADA;AAEV0B,UAAAA,cAAc,EAAE0B,GAAG,CAACpD,IAAJ,CAAS2B,KAFf;AAGVC,UAAAA,iBAAiB,EAAE;AAHT,SAAd;AAKH,OArBL;AAuBH;;;wCAEkB;AAAA;;AACflE,MAAAA,KAAK,CAACiF,GAAN,CAAU,KAAK5C,KAAL,CAAW0B,QAAX,GAAsB,aAAhC,EAA+C0B,IAA/C,CACI,UAAAC,GAAG,EAAI;AACH,QAAA,MAAI,CAACzE,QAAL,CAAc;AACV0E,UAAAA,OAAO,EAAGD,GAAG,CAACpD,IAAJ,CAASqD,OADT;AAEV/B,UAAAA,QAAQ,EAAElB,QAAQ,CAACgD,GAAG,CAACpD,IAAJ,CAASsB,QAAV,CAFR;AAGVC,UAAAA,QAAQ,EAAEnB,QAAQ,CAACgD,GAAG,CAACpD,IAAJ,CAASuB,QAAV,CAHR;AAIV3C,UAAAA,gBAAgB,EAAEwB,QAAQ,CAACgD,GAAG,CAACpD,IAAJ,CAASsB,QAAV,CAJhB;AAKVzC,UAAAA,cAAc,EAAEuB,QAAQ,CAACgD,GAAG,CAACpD,IAAJ,CAASuB,QAAV;AALd,SAAd;AAOH,OATL;AAWH;;;iCA6BW;AACRhD,MAAAA,IAAI,IAAI,CAAR;AACA,WAAK+D,SAAL;AACH;;;qCAEe;AACZ/D,MAAAA,IAAI,IAAI,CAAR;AACA,WAAK+D,SAAL;AACH;;;iCAkBY;AACT,WAAK3D,QAAL,CAAc;AACVoC,QAAAA,aAAa,EAAE,MADL;AAEVR,QAAAA,WAAW,EAAE,EAFH;AAGVE,QAAAA,UAAU,EAAE,EAHF;AAIVE,QAAAA,YAAY,EAAE,EAJJ;AAKVE,QAAAA,YAAY,EAAE,EALJ;AAMVgB,QAAAA,kBAAkB,EAAE,MANV;AAOVC,QAAAA,cAAc,EAAE;AAPN,OAAd;AASH;;;kCAEawB,K,EAAM;AAChB,WAAK3E,QAAL,CAAc;AACVqD,QAAAA,cAAc,EAAE,IADN;AAEVD,QAAAA,UAAU,EAAEuB;AAFF,OAAd;AAKH;;;6BAEQ;AAAA;;AAET,UAAMC,QAAQ,GAAG,KAAKxD,KAAL,CAAWc,YAAX,CAAwB2C,MAAzC;AACA,UAAMzB,UAAU,GAAG,KAAKhC,KAAL,CAAWgC,UAA9B;;AAEA,UAAK,KAAKhC,KAAL,CAAWuB,QAAX,KAAwB,EAAxB,IAA8B,CAAC,KAAKvB,KAAL,CAAWwB,QAAZ,KAAyB,EAAvD,IAA6D,KAAKxB,KAAL,CAAW2B,cAAX,KAA8B,EAAhG,EAAqG;AACjG,eAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACH;;AAED,UAAI,KAAK3B,KAAL,CAAW6B,iBAAf,EAAmC;AAC/B,eAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACH;;AAED,aACI;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,aAAf;AAA8B,QAAA,KAAK,EAAE;AAAC6B,UAAAA,OAAO,EAAE,KAAK1D,KAAL,CAAWgB;AAArB,SAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,kBAAf;AACI,QAAA,KAAK,EAAE;AAAC0C,UAAAA,OAAO,EAAE,KAAK1D,KAAL,CAAW8B;AAArB,SADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIQ,KAAK9B,KAAL,CAAWiC,cAAX,IACI,oBAAC,QAAD;AACI,QAAA,OAAO,EAAE,KAAKjC,KAAL,CAAW0B,QAAX,GAAsB,KAAK1B,KAAL,CAAWc,YAAX,CAAwBkB,UAAxB,EAAoC2B,KADvE;AAEI,QAAA,OAAO,EAAE,KAAK3D,KAAL,CAAW0B,QAAX,GAAsB,KAAK1B,KAAL,CAAWc,YAAX,CAAyB0C,QAAQ,GAAG,CAAZ,GAAiB,CAACxB,UAAU,GAAG,CAAd,IAAmBwB,QAApC,GAA+C,CAAvE,EAA0EG,KAF7G;AAGI,QAAA,OAAO,EAAE,KAAK3D,KAAL,CAAW0B,QAAX,GAAsB,KAAK1B,KAAL,CAAWc,YAAX,CAAyB0C,QAAQ,GAAG,CAAZ,GAAiB,CAACxB,UAAU,GAAGwB,QAAb,GAAwB,CAAzB,IAA8BA,QAA/C,GAA0D,CAAlF,EAAqFG,KAHxH;AAII,QAAA,cAAc,EAAE;AAAA,iBAAM,MAAI,CAAC/E,QAAL,CAAc;AAAEqD,YAAAA,cAAc,EAAE;AAAlB,WAAd,CAAN;AAAA,SAJpB;AAKI,QAAA,iBAAiB,EAAE;AAAA,iBACnB,MAAI,CAACrD,QAAL,CAAc;AACVoD,YAAAA,UAAU,EAAE,CAACA,UAAU,GAAGwB,QAAb,GAAwB,CAAzB,IAA8BA;AADhC,WAAd,CADmB;AAAA,SALvB;AAUI,QAAA,iBAAiB,EAAE;AAAA,iBACnB,MAAI,CAAC5E,QAAL,CAAc;AACVoD,YAAAA,UAAU,EAAE,CAACA,UAAU,GAAG,CAAd,IAAmBwB;AADrB,WAAd,CADmB;AAAA,SAVvB;AAeI,QAAA,mBAAmB,EAAE,IAfzB;AAgBI,QAAA,gBAAgB,EAAE,KAAKxD,KAAL,CAAWC,IAAX,CAAgB2D,SAAhB,IACX,KAAK5D,KAAL,CAAWC,IAAX,CAAgB2D,SAAhB,CAA0BC,QAA1B,CAAmC,KAAK7D,KAAL,CAAWc,YAAX,CAAwBkB,UAAxB,EAAoC5B,EAAvE,CADW,GAEZ,cAFY,GAGZ,IAnBV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALZ,CADJ,EAgCI;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,OAAhC;AAAwC,QAAA,EAAE,EAAC,iBAA3C;AAA6D,sBAAW,OAAxE;AAAgF,QAAA,OAAO,EAAE,KAAKsC,UAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAM,uBAAY,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAA5B,CADJ,EAEI;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA6C,KAAK1C,KAAL,CAAWQ,WAAxD,CAFJ,EAGI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA8C,KAAKR,KAAL,CAAWY,YAAzD,CAHJ,EAII;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAyC,KAAKZ,KAAL,CAAWU,UAApD,CAJJ,EAKI;AAAK,QAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALJ,EAMI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAGI;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEQ,KAAKV,KAAL,CAAWc,YAAX,CAAwBgD,GAAxB,CAA4B,UAAAC,GAAG;AAAA,eAC3B;AAAK,UAAA,GAAG,EAAEA,GAAG,CAAC3D,EAAd;AAAkB,UAAA,SAAS,EAAC,kBAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AACI,UAAA,GAAG,EAAC,EADR;AAEI,UAAA,SAAS,EAAE,MAAI,CAACJ,KAAL,CAAWC,IAAX,CAAgB2D,SAAhB,IACJ,MAAI,CAAC5D,KAAL,CAAWC,IAAX,CAAgB2D,SAAhB,CAA0BC,QAA1B,CAAmCE,GAAG,CAAC3D,EAAvC,CADI,GAEL,wBAFK,GAGL,YALV;AAMI,UAAA,EAAE,EAAE2D,GAAG,CAAC3D,EANZ;AAOI,UAAA,GAAG,EAAE,MAAI,CAACJ,KAAL,CAAW0B,QAAX,GAAsBqC,GAAG,CAACJ,KAPnC;AAQI,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAAChB,aAAL,CAAmB,MAAI,CAAC3C,KAAL,CAAWc,YAAX,CAAwBkD,OAAxB,CAAgCD,GAAhC,CAAnB,CAAN;AAAA,WARb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CAD2B;AAAA,OAA/B,CAFR,CAHJ,CANJ,CAJJ,CAhCJ,CADJ,EAsEI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,MAAD;AAAQ,QAAA,UAAU,EAAE,KAAK/D,KAAL,CAAWsB,UAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAII;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,EAII;AAAK,QAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,EAII;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,UAAD;AACI,QAAA,QAAQ,EAAE,KAAKlC,cADnB;AAEI,QAAA,OAAO,EAAE,KAAKY,KAAL,CAAWsD,OAFxB;AAGI,QAAA,KAAK,EAAE,KAAKtD,KAAL,CAAWX,aAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAJJ,CAJJ,EAgBI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,EAII;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD;AACI,QAAA,GAAG,EAAE,KAAKW,KAAL,CAAWuB,QADpB;AAEI,QAAA,GAAG,EAAE,KAAKvB,KAAL,CAAWwB,QAFpB;AAGI,QAAA,YAAY,EAAE,CAAC,KAAKxB,KAAL,CAAWnB,gBAAZ,EAA8B,KAAKmB,KAAL,CAAWlB,cAAzC,CAHlB;AAII,QAAA,QAAQ,EAAE,KAAKH,MAJnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAJJ,EAYI;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKqB,KAAL,CAAWnB,gBADhB,SACqC,KAAKmB,KAAL,CAAWlB,cADhD,CAZJ,CAhBJ,EAgCI;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAhCJ,EAmCI;AAAK,QAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,EAII;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,eAAD;AACI,QAAA,QAAQ,EAAE,KAAKQ,aADnB;AAEI,QAAA,IAAI,EAAC,iBAFT;AAGI,QAAA,KAAK,EAAE,KAAKU,KAAL,CAAWT,eAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAJJ,CAnCJ,EAgDI;AAAK,QAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,EAII;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,eAAD;AACI,QAAA,QAAQ,EAAE,KAAKC,YADnB;AAEI,QAAA,IAAI,EAAC,gBAFT;AAGI,QAAA,KAAK,EAAE,KAAKQ,KAAL,CAAWP,cAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAJJ,CAhDJ,EA4DI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,EAII;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,eAAD;AACI,QAAA,QAAQ,EAAE,KAAKC,WADnB;AAEI,QAAA,IAAI,EAAC,eAFT;AAGI,QAAA,KAAK,EAAE,KAAKM,KAAL,CAAWL,aAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAJJ,CA5DJ,EAwEI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,OAAO,EAAE,KAAK4C,SAAtB;AAAiC,QAAA,SAAS,EAAC,oBAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADJ,CAxEJ,CADJ,EA+EI;AAAK,QAAA,SAAS,EAAC,2CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AACI,QAAA,QAAQ,EAAE,KAAKxD,iBADnB;AAEI,QAAA,IAAI,EAAC,MAFT;AAGI,QAAA,EAAE,EAAC,iBAHP;AAII,QAAA,SAAS,EAAC,4CAJd;AAKI,QAAA,KAAK,EAAE,KAAKiB,KAAL,CAAWf,UALtB;AAMI,QAAA,UAAU,EAAK,oBAACD,CAAD,EAAO;AACd,cAAGA,CAAC,CAACiF,GAAF,KAAU,OAAb,EAAsB;AAClB,YAAA,MAAI,CAAC1B,SAAL;AACH;AACJ,SAVT;AAYI,QAAA,QAAQ,EAAC,EAZb;AAaI,QAAA,SAAS,EAAE,IAbf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAeI;AAAM,QAAA,SAAS,EAAC,0BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,OAAO,EAAE,KAAKA,SAAtB;AAAiC,QAAA,SAAS,EAAC,gBAA3C;AAA4D,QAAA,IAAI,EAAC,QAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAG,QAAA,SAAS,EAAC,yCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,CAfJ,CADJ,EAsBI,oBAAC,WAAD;AAAa,QAAA,UAAU,EAAE,KAAzB;AACY,QAAA,YAAY,EAAE,KAAKvC,KAAL,CAAWC,IAAX,CAAgB2D,SAD1C;AAEY,QAAA,OAAO,EAAE,KAAK5D,KAAL,CAAWC,IAAX,CAAgBC,OAFrC;AAGY,QAAA,QAAQ,EAAE,KAAKF,KAAL,CAAW0B,QAHjC;AAIY,QAAA,OAAO,EAAE,KAAK9B,YAJ1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAtBJ,EA2BM,KAAKI,KAAL,CAAW2B,cAAX,GAA0B,CAA1B,GACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACMnD,IAAI,GAAC,KAAKwB,KAAL,CAAWyB,SAAjB,GAA4B,CADjC,SACuCyC,IAAI,CAACC,GAAL,CAAS,KAAKnE,KAAL,CAAW2B,cAApB,EAAsC,CAAC,IAAEnD,IAAH,IAAW,KAAKwB,KAAL,CAAWyB,SAA5D,CADvC,UACsH,KAAKzB,KAAL,CAAW2B,cADjI,CADJ,EAII,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,mBAAb;AACQ,QAAA,QAAQ,EAAEnD,IAAI,GAAC,CAAL,KAAW,CAD7B;AAEQ,QAAA,OAAO,EAAE,KAAKgE,cAFtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,EAOI,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,eAAb;AACQ,QAAA,QAAQ,EAAEhE,IAAI,GAAC,CAAL,KAAW0F,IAAI,CAACE,IAAL,CAAU,KAAKpE,KAAL,CAAW2B,cAAX,GAA0B,KAAK3B,KAAL,CAAWyB,SAA/C,CAD7B;AAEQ,QAAA,OAAO,EAAE,KAAKgB,UAFtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPJ,CADF,GAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAxCR,CADJ,CA/EJ,CAJJ,EAkII;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAlIJ,CAtEJ,CADJ;AAgNC;;;;EAlZgB/E,S;;AAqZrB,eAAee,MAAf","sourcesContent":["import React, { Component } from 'react';\n\nimport axios from 'axios';\n\nimport Header from './generics/header'\n\nimport 'rc-slider/assets/index.css';\nimport 'rc-tooltip/assets/bootstrap.css';\n\nimport Slider from 'rc-slider';\n\nimport { EntriesList, AuthorList, OrderBySelector } from './generics/searchGenerics'\n\nimport Lightbox from 'react-image-lightbox';\nimport 'react-image-lightbox/style.css';\n\n\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\nconst Range = createSliderWithTooltip(Slider.Range);\n\nconst Button = ({name, disabled, onClick}) => (\n    \n    <button \n        className={ disabled ? name + \" disabled_pagination\" : name } \n        disabled={disabled} \n        onClick={onClick}\n    />\n);\n\n// Due to setState delay issues, variable managed on a higher level\nlet page = 0;\n\nclass Search extends Component {\n\n    constructor(props){\n        super(props)\n\n        console.log(\"props\", props)\n\n        this.state = {\n            data: props.location.state.detail ? props.location.state.detail : {},\n            query_text: props.location.state.query,\n            \n            filter_author: '',\n            filter_from_year: '',\n            filter_to_year: '',\n            \n            order_by_year: '',\n            order_by_author: '',\n            order_by_title: '',\n\n            isLoggedIn: true,\n\n            author:   '',\n            min_year: '',\n            max_year: '',\n\n            page_size: 5,\n\n            base_url: props.location.state.base_url,\n            total_elements: props.location.state.detail.total,\n\n            waiting_to_change: false,\n\n            modal_display: 'none',\n            modal_title: '',\n            modal_year: '',\n            modal_author: '',\n            modal_images: [],\n            img_detail_display: 'none',\n            img_detail_src: '',\n            photoIndex: 0,\n            isLightBoxOpen: false,\n        }\n\n        this.headers = [\n                {label: \"Titulo\", id: \"title\", numeric: false, disablePadding: true},\n                {label: \"Autor\", id: \"author\", numeric: false, disablePadding: true},\n                {label: \"Año\", id: \"year\", numeric: true, disablePadding: true},\n                {label: \"Imagenes\", id: \"entry_images\", numeric: false, disablePadding: true},\n            ];\n\n        this.handle = this.handle.bind()\n        this.onAuthorSelect = this.onAuthorSelect.bind(this)\n        this.onAuthorOrder = this.onAuthorOrder.bind(this)\n        this.onTitleOrder = this.onTitleOrder.bind(this)\n        this.onYearOrder = this.onYearOrder.bind(this)\n\n        this.fetchData = this.fetchData.bind(this)\n        this.onPreviousPage = this.onPreviousPage.bind(this)\n        this.onNextPage = this.onNextPage.bind(this)\n        this.onEntryClick = this.onEntryClick.bind(this)\n        this.closeModal = this.closeModal.bind(this)\n        this.handleInputChange = this.handleInputChange.bind(this)\n\n        this.showCarrousel = this.showCarrousel.bind(this);\n    }\n  \n    fetchData(){\n        this.setState({total_elements:'', waiting_to_change:true})\n\n        axios.get(this.state.base_url + '/entry/', \n        {\n            params: {\n                page_size: this.state.page_size,\n                page: page,\n                q: this.state.query_text,\n                order_year: this.state.order_by_year,\n                order_author: this.state.order_by_author,\n                order_title: this.state.order_by_title,\n                from_year: this.state.filter_from_year,\n                to_year: this.state.filter_to_year,\n                author: this.state.filter_author\n            }\n        })\n        .then(\n            res => {\n                this.setState({\n                    data: res.data,\n                    total_elements: res.data.total,\n                    waiting_to_change: false,\n                })\n            }\n        )\n    }\n\n    componentDidMount(){\n        axios.get(this.state.base_url + '/entry_meta').then(\n            res => {\n                this.setState({\n                    authors:  res.data.authors,\n                    min_year: parseInt(res.data.min_year),\n                    max_year: parseInt(res.data.max_year),\n                    filter_from_year: parseInt(res.data.min_year),\n                    filter_to_year: parseInt(res.data.max_year),\n                })\n            }\n        )\n    }\n\n    handle = (props) => {\n        this.setState({\n            filter_from_year: props[0],\n            filter_to_year: props[1],\n        })            \n    };\n\n    handleInputChange = (e) => {\n        this.setState({query_text: e.target.value});\n    }\n\n    onAuthorSelect = (e) => {\n        this.setState({filter_author: e.target.value});\n    } \n\n    onAuthorOrder = (e) => {\n        this.setState({order_by_author: e.target.value})\n    }\n\n    onTitleOrder = (e) => {\n        this.setState({order_by_title: e.target.value})\n    }\n\n    onYearOrder = (e) => {\n        this.setState({order_by_year: e.target.value})\n    }\n\n    onNextPage(){\n        page += 1;\n        this.fetchData()\n    }\n\n    onPreviousPage(){\n        page -= 1;\n        this.fetchData()\n    }\n\n    onEntryClick = (e) => {\n        e.stopPropagation();\n        e.preventDefault();\n\n        let entry = this.state.data.entries.find(\n                    entry => entry.id === parseInt(e.currentTarget.getAttribute(\"data-id\")));\n\n        this.setState({\n            modal_title: entry.title,\n            modal_year: entry.year,\n            modal_author: entry.author,\n            modal_images: entry.entry_images,\n            modal_display: '',\n        })\n    }\n\n    closeModal() {\n        this.setState({\n            modal_display: 'none',\n            modal_title: '',\n            modal_year: '',\n            modal_author: '',\n            modal_images: [],\n            img_detail_display: 'none',\n            img_detail_src: '',\n        })\n    }\n\n    showCarrousel(index){    \n        this.setState({\n            isLightBoxOpen: true,\n            photoIndex: index, \n        })\n\n    }\n\n    render() {\n\n    const img_leng = this.state.modal_images.length;\n    const photoIndex = this.state.photoIndex;\n\n    if ( this.state.min_year === '' || !this.state.max_year === '' || this.state.total_elements === '' ) {\n        return <div />\n    }\n\n    if( this.state.waiting_to_change ) {\n        return <div />\n    }\n\n    return (\n        <div className=\"search_container\">\n            <div className=\"modal_entry\"  style={{display: this.state.modal_display}} >\n                <div className=\"modal_img_detail\"\n                    style={{display: this.state.img_detail_display}}\n                    > \n                    {\n                        this.state.isLightBoxOpen && (\n                            <Lightbox\n                                mainSrc={this.state.base_url + this.state.modal_images[photoIndex].image}\n                                nextSrc={this.state.base_url + this.state.modal_images[(img_leng > 1) ? (photoIndex + 1) % img_leng : 0].image}\n                                prevSrc={this.state.base_url + this.state.modal_images[(img_leng > 1) ? (photoIndex + img_leng - 1) % img_leng : 0].image}\n                                onCloseRequest={() => this.setState({ isLightBoxOpen: false })}\n                                onMovePrevRequest={() =>\n                                this.setState({\n                                    photoIndex: (photoIndex + img_leng - 1) % img_leng\n                                })\n                                }\n                                onMoveNextRequest={() =>\n                                this.setState({\n                                    photoIndex: (photoIndex + 1) % img_leng,\n                                })\n                                }\n                                clickOutsideToClose={true}\n                                wrapperClassName={this.state.data.image_ids\n                                    && this.state.data.image_ids.includes(this.state.modal_images[photoIndex].id) \n                                    ? \"result_found\"\n                                    : null}\n                            />\n                        )\n                    }\n\n\n                </div>\n                <div className=\"modal_entry_detail\">\n                    <button type=\"button\" className=\"close\" id=\"btn_close_modal\" aria-label=\"Close\" onClick={this.closeModal}>\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                    <div className=\"entry_flex_wrapper\">\n                        <div className=\"m_data row\"><h3>Vista de registro detallada</h3></div>\n                        <div className=\"m_data row m_title\">Título: {this.state.modal_title}</div>\n                        <div className=\"m_data row m_author\">Author: {this.state.modal_author}</div>\n                        <div className=\"m_data row m_year\">Año: {this.state.modal_year}</div>\n                        <div className=\"m_data row m_imagenes_title\">Imagenes</div>\n                        <div className=\"m_data row m_images\">   \n                        <br></br>\n\n                            <div className=\"m_imagenes_imgs\">\n                                {\n                                    this.state.modal_images.map(img => \n                                        <div key={img.id} className=\"modalImageDetail\">\n                                            <img \n                                                alt=\"\" \n                                                className={this.state.data.image_ids \n                                                    && this.state.data.image_ids.includes(img.id) \n                                                    ? \"eid_image result_found\"\n                                                    : \"eid_image \"}\n                                                id={img.id} \n                                                src={this.state.base_url + img.image}\n                                                onClick={() => this.showCarrousel(this.state.modal_images.indexOf(img))}\n                                                />\n                                        </div>    \n                                    )\n                                }\n                            </div>\n                        \n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"search_wrapper\">\n                <div className=\"search_header\">\n                    <Header isLoggedIn={this.state.isLoggedIn}/>\n                </div>\n                <div className=\"search_body\">\n                    <div className=\"search_filters col-xs-4 col-md-2\">\n                        <div className=\"sf_category xs-12\">\n                            Filtros\n                        </div>\n                        <div className=\"search_filter sf_border_bottom xs-12\">\n                            <div className=\"sf_name\">\n                                Autor\n                            </div>\n                            <div className=\"sf_filter\">\n                                <AuthorList\n                                    onChange={this.onAuthorSelect}\n                                    authors={this.state.authors}\n                                    value={this.state.filter_author}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"search_filter xs-12\">\n                            <div className=\"sf_name\">\n                                Filtro por año\n                            </div>\n                            <div className=\"sf_filter\">\n                                <Range \n                                    min={this.state.min_year} \n                                    max={this.state.max_year} \n                                    defaultValue={[this.state.filter_from_year, this.state.filter_to_year]} \n                                    onChange={this.handle}\n                                />\n                            </div>\n                            <div className=\"sf_value\">\n                                {this.state.filter_from_year} - {this.state.filter_to_year}\n                            </div>\n                        </div>\n                        <div className=\"sf_category xs-12\">\n                            Ordenar por...\n                        </div>\n                        <div className=\"search_filter sf_border_bottom xs-12\">\n                            <div className=\"sf_name\">\n                                Autor\n                            </div>\n                            <div className=\"sf_filter\">\n                                <OrderBySelector\n                                    onChange={this.onAuthorOrder}\n                                    name=\"order_by_author\"\n                                    value={this.state.order_by_author}\n                                />\n                            </div>\n                        </div>\n                        \n                        <div className=\"search_filter sf_border_bottom xs-12\">\n                            <div className=\"sf_name\">\n                                Título\n                            </div>\n                            <div className=\"sf_filter\">\n                                <OrderBySelector\n                                    onChange={this.onTitleOrder}\n                                    name=\"order_by_title\"\n                                    value={this.state.order_by_title}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"search_filter xs-12\">                        \n                            <div className=\"sf_name\">\n                                Año\n                            </div>\n                            <div className=\"sf_filter\">\n                                <OrderBySelector\n                                    onChange={this.onYearOrder}\n                                    name=\"order_by_year\"\n                                    value={this.state.order_by_year}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"search_filter xs-12\">\n                            <button onClick={this.fetchData} className=\"sf_name filter_btn\">\n                                Refinar la busqueda!\n                            </button>\n                        </div>\n                    </div>\n                    <div className=\"search_results_wrapper col-xs-8 col-md-10\">\n                        <div className=\"search_results\">\n                            <div className=\"sr_searchbar\">\n                                <input \n                                    onChange={this.handleInputChange} \n                                    type=\"text\" \n                                    id=\"searchBarSearch\" \n                                    className=\"form-control col-xs-9 display_inline_block\" \n                                    value={this.state.query_text} \n                                    onKeyPress = { (e) => {\n                                            if(e.key === 'Enter') {\n                                                this.fetchData();\n                                            }\n                                        }\n                                    }\n                                    required=\"\" \n                                    autoFocus={true}/>\n                                <span className=\"input-group-btn col-xs-2\">\n                                    <button onClick={this.fetchData} className=\"btn btn-search\" type=\"button\">\n                                        <i className=\"fa fa-search fa-fw display_inline_block\"></i>\n                                    </button>\n                                </span>\n                            </div>\n                            <EntriesList editDelete={false} \n                                        resultOnImgs={this.state.data.image_ids}\n                                        entries={this.state.data.entries} \n                                        base_url={this.state.base_url} \n                                        onClick={this.onEntryClick}/>\n                            { this.state.total_elements>0 ? \n                                <div className=\"pagination_container\">\n                                    <div className=\"total_elements\"> \n                                        {(page*this.state.page_size)+1} - {Math.min(this.state.total_elements, ( (1+page) * this.state.page_size ) )} de {this.state.total_elements}\n                                    </div>\n                                    <Button name=\"previous_page_btn\"\n                                            disabled={page+1 === 1} \n                                            onClick={this.onPreviousPage}/>\n                                    <Button name=\"next_page_btn\" \n                                            disabled={page+1 === Math.ceil(this.state.total_elements/this.state.page_size)} \n                                            onClick={this.onNextPage}/>\n                                </div>\n                                :\n                                <div></div>\n                            }\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"search_footer xs-12\">\n                </div>\n\n            </div>\n        </div>\n    );\n\n    }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}