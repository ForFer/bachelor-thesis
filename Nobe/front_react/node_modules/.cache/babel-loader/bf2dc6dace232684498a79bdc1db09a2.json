{"ast":null,"code":"import _classCallCheck from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fernando/tfg/portal/reactfront/src/components/user/usersTable.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { OrderBySelector } from './searchGenerics'; // TODO: generalize DeleteModal\n\nvar DeleteModal = function DeleteModal(_ref) {\n  var user = _ref.user,\n      _onClick = _ref.onClick,\n      selectedId = _ref.selectedId,\n      onCancelClick = _ref.onCancelClick;\n  return React.createElement(\"div\", {\n    className: \"delete_modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"dm_message\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    },\n    __self: this\n  }, \"\\xBFEst\\xE1s seguro de querer borrar el usuario \", user, \"?\"), React.createElement(\"div\", {\n    className: \"dm_btn_wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    id: \"dm_btn_delete\",\n    onClick: function onClick() {\n      return _onClick(selectedId);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, \"Borrar\"), React.createElement(\"button\", {\n    onClick: onCancelClick,\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  }, \"Cancelar\")));\n}; // Due to setState delay issues, variable managed on a higher level\n\n\nvar page = 0;\n\nvar EntryTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EntryTable, _Component);\n\n  function EntryTable(props) {\n    var _this;\n\n    _classCallCheck(this, EntryTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EntryTable).call(this, props));\n\n    _this.onUserOrder = function (e) {\n      _this.setState({\n        order_by_username: e.target.value\n      });\n    };\n\n    _this.onEmailOrder = function (e) {\n      _this.setState({\n        order_by_email: e.target.value\n      });\n    };\n\n    _this.onCreatedOrder = function (e) {\n      _this.setState({\n        order_by_created: e.target.value\n      });\n    };\n\n    _this.state = {\n      data: {},\n      query_text: '',\n      order_by_username: '',\n      order_by_email: '',\n      order_by_created: '',\n      page_size: 5,\n      base_url: props.base_url,\n      total_elements: 0,\n      waiting_to_change: false,\n      modal_display: 'none'\n    };\n    _this.onUserOrder = _this.onUserOrder.bind(_assertThisInitialized(_this));\n    _this.onEmailOrder = _this.onEmailOrder.bind(_assertThisInitialized(_this));\n    _this.onCreatedOrder = _this.onCreatedOrder.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(EntryTable, [{\n    key: \"fetchData\",\n    value: function fetchData() {\n      this.setState({\n        total_elements: '',\n        waiting_to_change: true\n      });\n      axios.get(this.state.base_url + '/users/', {\n        params: {\n          page_size: this.state.page_size,\n          page: page,\n          q: this.state.query_text,\n          order_username: this.state.order_by_username,\n          order_email: this.state.order_by_email,\n          order_created: this.state.order_by_created\n        }\n      }).then(function (res) {\n        console.log(res);\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"onNextPage\",\n    value: function onNextPage() {\n      page += 1;\n      this.fetchData();\n    }\n  }, {\n    key: \"onPreviousPage\",\n    value: function onPreviousPage() {\n      page -= 1;\n      this.fetchData();\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        modal_display: 'none',\n        modal_title: '',\n        modal_year: '',\n        modal_author: '',\n        modal_images: [],\n        display_delete_modal: 'none',\n        selected_entry_id: ''\n      });\n    }\n    /*\n    Analyze para users\n    removeEntry(id) {\n        this.setState({\n            modal_display: '',\n            display_delete_modal: '',\n            selected_entry_id: id,\n        })\n    }\n     confirmRemoveEntry(id) {\n        axios.delete(this.state.base_url + `/entry/${id}/`,\n            { \n                headers: {\n                    'Authorization': `Token ${localStorage.getItem(\"token\")}`,\n                }\n            })\n            .then(\n                res => {\n                    this.closeModal();\n                    this.fetchData();\n                }\n            )\n    }\n        */\n\n  }, {\n    key: \"getUser\",\n    value: function getUser() {// let filtered_entry = this.state.data.entries.filter(entry => entry.id===this.state.selected_entry_id );\n      // return ( filtered_entry.length <= 0 )\n      //     ? \"\"\n      //     : filtered_entry[0].title        \n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // TODO: modificar behaviour so that solo la tabla se quede sin renderizar hasta \n      // encontrar datos de nuevo\n      if (this.state.total_elements === '') {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        });\n      }\n\n      if (this.state.waiting_to_change) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"search_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_entry\",\n        style: {\n          display: this.state.modal_display\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_entry_detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"close\",\n        id: \"btn_close_modal\",\n        \"aria-label\": \"Close\",\n        onClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"\\xD7\")), React.createElement(DeleteModal, {\n        style: {\n          dismiss: this.state.display_delete_modal\n        },\n        title: this.getTitle(),\n        onClick: this.confirmRemoveEntry,\n        selectedId: this.state.selected_entry_id,\n        onCancelClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_filters col-xs-4 col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_category xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Ordenar por...\"), React.createElement(\"div\", {\n        className: \"search_filter sf_border_bottom xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"Nombre de usuario\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onUserOrder,\n        name: \"order_by_username\",\n        value: this.state.order_by_username,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter sf_border_bottom xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Fecha creaci\\xF3n usuario\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onCreatedOrder,\n        name: \"order_by_created\",\n        value: this.state.order_by_created,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter sf_border_bottom xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onEmailOrder,\n        name: \"order_by_email\",\n        value: this.state.order_by_email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.fetchData,\n        className: \"sf_name filter_btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Refinar la busqueda!\"))), React.createElement(\"div\", {\n        className: \"search_results_wrapper col-xs-8 col-md-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_results\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sr_searchbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: this.handleInputChange,\n        type: \"text\",\n        id: \"searchBarSearch\",\n        className: \"form-control col-xs-9 display_inline_block\",\n        value: this.state.query_text,\n        required: \"\",\n        autoFocus: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"input-group-btn col-xs-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.fetchData,\n        className: \"btn btn-search\",\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-search fa-fw display_inline_block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      })))), this.state.total_elements > 0 ? React.createElement(\"div\", {\n        className: \"pagination_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"total_elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, page * this.state.page_size + 1, \" - \", Math.min(this.state.total_elements, (1 + page) * this.state.page_size), \" de \", this.state.total_elements), React.createElement(Button, {\n        name: \"previous_page_btn\",\n        disabled: page + 1 === 1,\n        onClick: this.onPreviousPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }), React.createElement(Button, {\n        name: \"next_page_btn\",\n        disabled: page + 1 === Math.ceil(this.state.total_elements / this.state.page_size),\n        onClick: this.onNextPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return EntryTable;\n}(Component);\n\nexport default UsersTable;","map":{"version":3,"sources":["/home/fernando/tfg/portal/reactfront/src/components/user/usersTable.js"],"names":["React","Component","axios","OrderBySelector","DeleteModal","user","onClick","selectedId","onCancelClick","page","EntryTable","props","onUserOrder","e","setState","order_by_username","target","value","onEmailOrder","order_by_email","onCreatedOrder","order_by_created","state","data","query_text","page_size","base_url","total_elements","waiting_to_change","modal_display","bind","get","params","q","order_username","order_email","order_created","then","res","console","log","fetchData","modal_title","modal_year","modal_author","modal_images","display_delete_modal","selected_entry_id","display","closeModal","dismiss","getTitle","confirmRemoveEntry","handleInputChange","Math","min","onPreviousPage","ceil","onNextPage","UsersTable"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { OrderBySelector } from './searchGenerics'\n\n\n// TODO: generalize DeleteModal\nconst DeleteModal = ({user, onClick, selectedId, onCancelClick}) => (\n    <div className=\"delete_modal\">\n        <div className=\"dm_message\">¿Estás seguro de querer borrar el usuario {user}?</div>\n        <div className=\"dm_btn_wrapper\">\n        <button type=\"button\" \n                className=\"btn btn-primary\" \n                id=\"dm_btn_delete\"\n                onClick={() => onClick(selectedId)}>\n                Borrar \n                </button>\n\n        <button onClick={onCancelClick} \n                type=\"button\" \n                className=\"btn btn-secondary\" \n                data-dismiss=\"modal\">\n                Cancelar\n                </button>\n        </div>\n    </div>\n);\n\n// Due to setState delay issues, variable managed on a higher level\nlet page = 0;\n\nclass EntryTable extends Component {\n    \n    constructor(props){\n        super(props)\n\n        this.state = {\n            data: {},\n            query_text: '',\n            \n            order_by_username: '',\n            order_by_email: '',\n            order_by_created: '',\n\n            page_size: 5,\n\n            base_url: props.base_url,\n            total_elements: 0,\n\n            waiting_to_change: false,\n\n            modal_display: 'none',\n        }\n\n        this.onUserOrder = this.onUserOrder.bind(this)\n        this.onEmailOrder = this.onEmailOrder.bind(this)\n        this.onCreatedOrder = this.onCreatedOrder.bind(this)\n\n    }\n  \n    fetchData(){\n        this.setState({total_elements:'', waiting_to_change:true})\n\n        axios.get(this.state.base_url + '/users/', \n        {\n            params: {\n                page_size: this.state.page_size,\n                page: page,\n                q: this.state.query_text,\n                order_username: this.state.order_by_username,\n                order_email: this.state.order_by_email,\n                order_created: this.state.order_by_created\n            }\n        })\n        .then(\n            res => {\n                console.log(res);\n            }\n        )\n    }\n\n    componentWillMount(){\n        this.fetchData();\n    }\n\n    onUserOrder = (e) => {\n        this.setState({order_by_username: e.target.value})\n    }\n    \n    onEmailOrder = (e) => {\n        this.setState({order_by_email: e.target.value})\n    }\n\n    onCreatedOrder = (e) => {\n        this.setState({order_by_created: e.target.value})\n    }\n\n    onNextPage(){\n        page += 1;\n        this.fetchData()\n    }\n\n    onPreviousPage(){\n        page -= 1;\n        this.fetchData()\n    }\n\n    closeModal() {\n        this.setState({\n            modal_display: 'none',\n            modal_title: '',\n            modal_year: '',\n            modal_author: '',\n            modal_images: [],\n            display_delete_modal: 'none',\n            selected_entry_id: '',\n        })\n    }\n\n    /*\n    Analyze para users\n    removeEntry(id) {\n        this.setState({\n            modal_display: '',\n            display_delete_modal: '',\n            selected_entry_id: id,\n        })\n    }\n\n    confirmRemoveEntry(id) {\n        axios.delete(this.state.base_url + `/entry/${id}/`,\n            { \n                headers: {\n                    'Authorization': `Token ${localStorage.getItem(\"token\")}`,\n                }\n            })\n            .then(\n                res => {\n                    this.closeModal();\n                    this.fetchData();\n                }\n            )\n    }\n        */\n\n    getUser() {\n        // let filtered_entry = this.state.data.entries.filter(entry => entry.id===this.state.selected_entry_id );\n        // return ( filtered_entry.length <= 0 )\n        //     ? \"\"\n        //     : filtered_entry[0].title        \n    }\n\n    render() {\n\n        // TODO: modificar behaviour so that solo la tabla se quede sin renderizar hasta \n        // encontrar datos de nuevo\n        if ( this.state.total_elements === '' ) {\n            return <div />\n        }\n\n        if( this.state.waiting_to_change ) {\n            return <div />\n        }\n\n        return (\n\n        <div className=\"search_container\">\n\n            <div className=\"modal_entry\"  style={{display: this.state.modal_display}} >\n                <div className=\"modal_entry_detail\">\n                    <button type=\"button\" className=\"close\" id=\"btn_close_modal\" aria-label=\"Close\" onClick={this.closeModal}>\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                    <DeleteModal style={{dismiss: this.state.display_delete_modal}} \n                                title={this.getTitle()} \n                                onClick={this.confirmRemoveEntry}\n                                selectedId = {this.state.selected_entry_id}\n                                onCancelClick= {this.closeModal}\n                                />\n                </div>\n            </div>\n\n            <div className=\"search_body\">\n                <div className=\"search_filters col-xs-4 col-md-2\">\n                    <div className=\"sf_category xs-12\">\n                        Ordenar por...\n                    </div>\n                    <div className=\"search_filter sf_border_bottom xs-12\">\n                        <div className=\"sf_name\">\n                            Nombre de usuario\n                        </div>\n                        <div className=\"sf_filter\">\n                            <OrderBySelector\n                                onChange={this.onUserOrder}\n                                name=\"order_by_username\"\n                                value={this.state.order_by_username}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"search_filter sf_border_bottom xs-12\">\n                        <div className=\"sf_name\">\n                            Fecha creación usuario\n                        </div>\n                        <div className=\"sf_filter\">\n                            <OrderBySelector\n                                onChange={this.onCreatedOrder}\n                                name=\"order_by_created\"\n                                value={this.state.order_by_created}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"search_filter sf_border_bottom xs-12\">\n                        <div className=\"sf_name\">\n                            Email\n                        </div>\n                        <div className=\"sf_filter\">\n                            <OrderBySelector\n                                onChange={this.onEmailOrder}\n                                name=\"order_by_email\"\n                                value={this.state.order_by_email}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"search_filter xs-12\">\n                        <button onClick={this.fetchData} className=\"sf_name filter_btn\">\n                            Refinar la busqueda!\n                        </button>\n                    </div>\n                </div>\n                <div className=\"search_results_wrapper col-xs-8 col-md-10\">\n                    <div className=\"search_results\">\n                        <div className=\"sr_searchbar\">\n                            <input \n                                onChange={this.handleInputChange} \n                                type=\"text\" \n                                id=\"searchBarSearch\" \n                                className=\"form-control col-xs-9 display_inline_block\" \n                                value={this.state.query_text} \n                                required=\"\" \n                                autoFocus={true}/>\n                            <span className=\"input-group-btn col-xs-2\">\n                                <button onClick={this.fetchData} className=\"btn btn-search\" type=\"button\">\n                                    <i className=\"fa fa-search fa-fw display_inline_block\"></i>\n                                </button>\n                            </span>\n                        </div>\n                        {/* <UserList   entries={this.state.data.entries} \n                                    base_url={this.state.base_url} \n                                    onClick={this.onEntryClick} \n                                    onRemoveClick={this.removeEntry}\n                                    editDelete={true}\n                                    /> */}\n                        { this.state.total_elements>0 ? \n                            <div className=\"pagination_container\">\n                                <div className=\"total_elements\"> \n                                    {(page*this.state.page_size)+1} - {Math.min(this.state.total_elements, ( (1+page) * this.state.page_size ) )} de {this.state.total_elements}\n                                </div>\n                                <Button name=\"previous_page_btn\"\n                                        disabled={page+1 === 1} \n                                        onClick={this.onPreviousPage}/>\n                                <Button name=\"next_page_btn\" \n                                        disabled={page+1 === Math.ceil(this.state.total_elements/this.state.page_size)} \n                                        onClick={this.onNextPage}/>\n                            </div>\n                            :\n                            <div></div>\n                        }\n                    </div>\n                </div>\n            </div>\n\n        </div>\n            \n        )\n    }\n\n}\n\nexport default UsersTable;"]},"metadata":{},"sourceType":"module"}