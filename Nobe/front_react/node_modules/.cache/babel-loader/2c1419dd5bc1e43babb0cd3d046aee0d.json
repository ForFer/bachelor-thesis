{"ast":null,"code":"import _regeneratorRuntime from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/fernando/tfg/portal/reactfront/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/fernando/tfg/portal/reactfront/src/components/user/usersTable.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { OrderBySelector, Button } from '../generics/searchGenerics';\nimport UserList from '../user/UserList';\nvar base_url = \"http://127.0.0.1:8000\"; // TODO: generalize DeleteModal\n\nvar DeleteModal = function DeleteModal(_ref) {\n  var user = _ref.user,\n      _onClick = _ref.onClick,\n      selectedId = _ref.selectedId,\n      onCancelClick = _ref.onCancelClick;\n  return React.createElement(\"div\", {\n    className: \"delete_user_modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"dm_message\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }, \"\\xBFEst\\xE1s seguro de querer borrar el usuario \", user, \"?\"), React.createElement(\"div\", {\n    className: \"dm_btn_wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    id: \"dm_btn_delete\",\n    onClick: function onClick() {\n      return _onClick(selectedId);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, \"Borrar\"), React.createElement(\"button\", {\n    onClick: onCancelClick,\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    \"data-dismiss\": \"modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }, \"Cancelar\")));\n};\n\nfunction escFunction(event, closeModal) {\n  if (event.keyCode === 27) {\n    closeModal();\n  }\n} // Due to setState delay issues, variable managed on a higher level\n\n\nvar page = 0;\n\nvar UsersTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UsersTable, _Component);\n\n  function UsersTable(props) {\n    var _this;\n\n    _classCallCheck(this, UsersTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UsersTable).call(this, props));\n\n    _this.handleInputChange = function (e) {\n      page = 0;\n\n      _this.setState({\n        query_text: e.target.value\n      });\n    };\n\n    _this.onUserOrder = function (e) {\n      _this.setState({\n        order_by_username: e.target.value\n      });\n    };\n\n    _this.onEmailOrder = function (e) {\n      _this.setState({\n        order_by_email: e.target.value\n      });\n    };\n\n    _this.onCreatedOrder = function (e) {\n      _this.setState({\n        order_by_created: e.target.value\n      });\n    };\n\n    _this.onChangeEditUsername = function (e) {\n      _this.setState({\n        editUser_username: e.target.value\n      });\n    };\n\n    _this.onChangeEditPassword = function (e) {\n      var password = e.target.value;\n      var errorMessage = _this.state.errorMessage;\n      errorMessage = _this.state.editUser_password_repeated !== password ? \"Las contraseñas no coinciden\" : '';\n\n      _this.setState({\n        editUser_password: password,\n        errorMessage: errorMessage\n      });\n    };\n\n    _this.onChangeEditPasswordRepeated = function (e) {\n      var password = e.target.value;\n      var errorMessage = _this.state.errorMessage;\n      errorMessage = _this.state.editUser_password !== password ? \"Las contraseñas no coinciden\" : '';\n\n      _this.setState({\n        editUser_password_repeated: password,\n        errorMessage: errorMessage\n      });\n    };\n\n    _this.onChangeEditEmail = function (e) {\n      _this.setState({\n        editUser_email: e.target.value\n      });\n    };\n\n    _this.state = {\n      current_user: props.currentUser,\n      data: {},\n      query_text: '',\n      order_by_username: '',\n      order_by_email: '',\n      order_by_created: '',\n      page_size: 10,\n      base_url: props.base_url,\n      total_elements: 0,\n      waiting_to_change: false,\n      modal_display: 'none',\n      selected_user_id: '',\n      display_delete_modal: '',\n      display_edit_modal: '',\n      editUser_id: '',\n      editUser_username: '',\n      editUser_email: '',\n      editUser_password: '',\n      editUser_password_repeated: '',\n      edit_error_message: ''\n    };\n    _this.handleInputChange = _this.handleInputChange.bind(_assertThisInitialized(_this));\n    _this.onUserOrder = _this.onUserOrder.bind(_assertThisInitialized(_this));\n    _this.onEmailOrder = _this.onEmailOrder.bind(_assertThisInitialized(_this));\n    _this.onCreatedOrder = _this.onCreatedOrder.bind(_assertThisInitialized(_this));\n    _this.onNextPage = _this.onNextPage.bind(_assertThisInitialized(_this));\n    _this.onPreviousPage = _this.onPreviousPage.bind(_assertThisInitialized(_this));\n    _this.fetchData = _this.fetchData.bind(_assertThisInitialized(_this));\n    _this.getUser = _this.getUser.bind(_assertThisInitialized(_this));\n    _this.getUserName = _this.getUserName.bind(_assertThisInitialized(_this));\n    _this.removeUser = _this.removeUser.bind(_assertThisInitialized(_this));\n    _this.confirmRemoveUser = _this.confirmRemoveUser.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    _this.editUser = _this.editUser.bind(_assertThisInitialized(_this));\n    _this.onChangeEditUsername = _this.onChangeEditUsername.bind(_assertThisInitialized(_this));\n    _this.onChangeEditPassword = _this.onChangeEditPassword.bind(_assertThisInitialized(_this));\n    _this.onChangeEditEmail = _this.onChangeEditEmail.bind(_assertThisInitialized(_this));\n    _this.onSubmitEdit = _this.onSubmitEdit.bind(_assertThisInitialized(_this));\n    _this.logout = _this.logout.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(UsersTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      document.addEventListener(\"keydownUsers\", function (e) {\n        return escFunction(e, _this2.closeModal);\n      }, false);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this3 = this;\n\n      document.removeEventListener(\"keydownUsers\", function (e) {\n        return escFunction(e, _this3.closeModal);\n      }, false);\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.fetchData();\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this4 = this;\n\n      this.setState({\n        total_elements: '',\n        waiting_to_change: true\n      });\n      axios.get(base_url + '/users/', {\n        params: {\n          page_size: this.state.page_size,\n          page: page,\n          q: this.state.query_text,\n          order_username: this.state.order_by_username,\n          order_email: this.state.order_by_email,\n          order_joined: this.state.order_by_created\n        },\n        headers: {\n          'Authorization': \"Token \".concat(localStorage.getItem(\"token\"))\n        }\n      }).then(function (res) {\n        _this4.setState({\n          data: res.data,\n          total_elements: res.data.total,\n          waiting_to_change: false\n        });\n      });\n    }\n  }, {\n    key: \"onNextPage\",\n    value: function onNextPage() {\n      page += 1;\n      this.fetchData();\n    }\n  }, {\n    key: \"onPreviousPage\",\n    value: function onPreviousPage() {\n      page -= 1;\n      this.fetchData();\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        modal_display: 'none',\n        modal_title: '',\n        modal_year: '',\n        modal_author: '',\n        modal_images: [],\n        display_delete_modal: 'none',\n        display_edit_modal: 'none',\n        selected_user_id: ''\n      });\n    }\n  }, {\n    key: \"removeUser\",\n    value: function removeUser(id) {\n      this.setState({\n        modal_display: '',\n        display_delete_modal: '',\n        display_edit_modal: 'none',\n        selected_user_id: id\n      });\n    }\n  }, {\n    key: \"editUser\",\n    value: function editUser(id) {\n      this.setState({\n        modal_display: '',\n        display_delete_modal: 'none',\n        display_edit_modal: '',\n        selected_user_id: id\n      });\n      this.getUser(id);\n    }\n  }, {\n    key: \"confirmRemoveUser\",\n    value: function confirmRemoveUser(id) {\n      var _this5 = this;\n\n      axios.delete(base_url + \"/user/\".concat(id, \"/\"), {\n        headers: {\n          'Authorization': \"Token \".concat(localStorage.getItem(\"token\"))\n        }\n      }).then(function (res) {\n        _this5.closeModal();\n\n        window.alert(\"¡Usuario borrado correctamente!\");\n\n        _this5.fetchData();\n      }).catch(function (error) {\n        window.alert(\"Ha ocurrido un error: \", error.response);\n      });\n    }\n  }, {\n    key: \"onSubmitEdit\",\n    value: function onSubmitEdit() {\n      var _this6 = this;\n\n      console.log(\"click\");\n      var _data = {};\n      var _method = 'patch';\n\n      if (this.state.editUser_username !== '') {\n        _data['username'] = this.state.editUser_username;\n      } else {\n        this.setState({\n          errorMessage: 'Campo usuario no puede estar vacio'\n        });\n        return null;\n      }\n\n      if (this.state.editUser_email !== '') {\n        _data['email'] = this.state.editUser_email;\n      } else {\n        this.setState({\n          errorMessage: 'Campo email no puede estar vacio'\n        });\n        return null;\n      }\n\n      if (this.state.editUser_email || this.state.editUser_password_repeated) {\n        if (this.state.editUser_password !== this.state.editUser_password_repeated) {\n          this.setState({\n            errorMessage: \"Las contraseñas no coinciden\"\n          });\n          return null;\n        }\n      }\n\n      if (this.state.editUser_password !== '') {\n        _data['password'] = this.state.editUser_password;\n        _method = 'put';\n      }\n\n      axios({\n        method: _method,\n        url: base_url + \"/user/\".concat(this.state.editUser_id, \"/\"),\n        data: _data,\n        headers: {\n          'Content-Type': 'application/json; charset=UTF-8',\n          'Authorization': \"Token \".concat(localStorage.getItem(\"token\"))\n        }\n      }).then(function (res) {\n        if (parseInt(_this6.state.current_user) === _this6.state.editUser_id && _this6.state.editUser_password !== '') {\n          window.alert(\"Tus datos han sido modificados correctamente, tienes que hacer login de nuevo\");\n\n          _this6.logout();\n        } else {\n          _this6.setState({\n            editUser_id: '',\n            editUser_username: '',\n            editUser_email: '',\n            editUser_password: '',\n            editUser_password_repeated: ''\n          });\n\n          _this6.closeModal();\n\n          window.alert(\"Usuario modificado correctamente\");\n\n          _this6.fetchData();\n        }\n      }).catch(function (error) {\n        _this6.setState({\n          edit_error_message: error.response\n        });\n      });\n    }\n  }, {\n    key: \"getUserName\",\n    value: function getUserName() {\n      var _this7 = this;\n\n      var filtered_user = this.state.data.users.filter(function (user) {\n        return user.id === _this7.state.selected_user_id;\n      });\n      return filtered_user.length <= 0 ? \"\" : filtered_user[0];\n    }\n  }, {\n    key: \"getUser\",\n    value: function getUser(id) {\n      var _id = id || this.state.selected_user_id;\n\n      var filtered_user = this.state.data.users.filter(function (user) {\n        return user.id === _id;\n      });\n      this.setState({\n        editUser_id: id,\n        editUser_username: filtered_user[0].username,\n        editUser_email: filtered_user[0].email,\n        editUser_password: ''\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      this.props.history.push({\n        pathname: '/landing'\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      if (!this.state.current_user) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 367\n          },\n          __self: this\n        });\n      } // TODO: modificar behaviour so that solo la tabla se quede sin renderizar hasta \n      // encontrar datos de nuevo\n\n\n      if (this.state.total_elements === '') {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 373\n          },\n          __self: this\n        });\n      }\n\n      if (this.state.waiting_to_change) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 377\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"search_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_entry\",\n        style: {\n          display: this.state.modal_display\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal_users\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"close\",\n        id: \"btn_close_modal\",\n        \"aria-label\": \"Close\",\n        onClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387\n        },\n        __self: this\n      }, \"\\xD7\")), React.createElement(\"div\", {\n        style: {\n          display: this.state.display_delete_modal\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, React.createElement(DeleteModal, {\n        user: this.getUserName().username,\n        onClick: this.confirmRemoveUser,\n        selectedId: this.state.selected_user_id,\n        onCancelClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          display: this.state.display_edit_modal\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form_edit_user height_100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399\n        },\n        __self: this\n      }, \" Editar usuario \"), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"username_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, \"Usuario\"), React.createElement(\"input\", {\n        value: this.state.editUser_username,\n        onChange: this.onChangeEditUsername,\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"useremail_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"input\", {\n        value: this.state.editUser_email,\n        onChange: this.onChangeEditEmail,\n        type: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"userpass_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413\n        },\n        __self: this\n      }, \"Contrase\\xF1a\"), React.createElement(\"input\", {\n        value: this.state.editUser_password,\n        onChange: this.onChangeEditPassword,\n        type: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"userpass_label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, \"Contrase\\xF1a\"), React.createElement(\"input\", {\n        value: this.state.editUser_password_repeated,\n        onChange: this.onChangeEditPasswordRepeated,\n        type: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"warn edit_user_password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425\n        },\n        __self: this\n      }, \"Si se deja vac\\xEDo el campo contrase\\xF1a, se mantendr\\xE1 su valor anterior\"), React.createElement(\"button\", {\n        type: \"button\",\n        id: \"edit_user_edit\",\n        className: \"btn btn-primary\",\n        onClick: this.onSubmitEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429\n        },\n        __self: this\n      }, \"Editar\"), React.createElement(\"button\", {\n        onClick: this.closeModal,\n        type: \"button\",\n        className: \"btn btn-secondary\",\n        \"data-dismiss\": \"modal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436\n        },\n        __self: this\n      }, \"Cancelar\"), React.createElement(\"div\", {\n        className: \"warn\",\n        style: {\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443\n        },\n        __self: this\n      }, this.state.edit_error_message)))))), React.createElement(\"div\", {\n        className: \"search_body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_filters col-xs-4 col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_category xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456\n        },\n        __self: this\n      }, \"Ordenar por...\"), React.createElement(\"div\", {\n        className: \"search_filter sf_border_bottom xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460\n        },\n        __self: this\n      }, \"Nombre de usuario\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onUserOrder,\n        name: \"order_by_username\",\n        value: this.state.order_by_username,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter sf_border_bottom xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473\n        },\n        __self: this\n      }, \"Fecha creaci\\xF3n usuario\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onCreatedOrder,\n        name: \"order_by_created\",\n        value: this.state.order_by_created,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter sf_border_bottom xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sf_name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"div\", {\n        className: \"sf_filter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489\n        },\n        __self: this\n      }, React.createElement(OrderBySelector, {\n        onChange: this.onEmailOrder,\n        name: \"order_by_email\",\n        value: this.state.order_by_email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"search_filter xs-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 497\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.fetchData,\n        className: \"sf_name filter_btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498\n        },\n        __self: this\n      }, \"Refinar la busqueda!\"))), React.createElement(\"div\", {\n        className: \"search_results_wrapper col-xs-8 col-md-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"search_results\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"sr_searchbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        onChange: this.handleInputChange,\n        type: \"text\",\n        id: \"searchBarSearch\",\n        className: \"form-control col-xs-9 display_inline_block\",\n        value: this.state.query_text,\n        required: \"\",\n        autoFocus: true,\n        onKeyPress: function onKeyPress(e) {\n          if (e.key === 'Enter') {\n            _this8.fetchData();\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 506\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"input-group-btn col-xs-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.fetchData,\n        className: \"btn btn-search\",\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-search fa-fw display_inline_block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523\n        },\n        __self: this\n      })))), React.createElement(UserList, {\n        users: this.state.data.users,\n        base_url: this.state.base_url,\n        onClick: this.onEntryClick,\n        onRemoveClick: this.removeUser,\n        onEditClick: this.editUser,\n        editDelete: true,\n        currentUser: this.state.current_user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527\n        },\n        __self: this\n      }), this.state.total_elements > 0 ? React.createElement(\"div\", {\n        className: \"pagination_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 536\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"total_elements\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537\n        },\n        __self: this\n      }, page * this.state.page_size + 1, \" - \", Math.min(this.state.total_elements, (1 + page) * this.state.page_size), \" de \", this.state.total_elements), React.createElement(Button, {\n        name: \"previous_page_btn\",\n        disabled: page + 1 === 1,\n        onClick: this.onPreviousPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540\n        },\n        __self: this\n      }), React.createElement(Button, {\n        name: \"next_page_btn\",\n        disabled: page + 1 === Math.ceil(this.state.total_elements / this.state.page_size),\n        onClick: this.onNextPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 548\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return UsersTable;\n}(Component);\n\nexport default UsersTable;","map":{"version":3,"sources":["/home/fernando/tfg/portal/reactfront/src/components/user/usersTable.js"],"names":["React","Component","axios","OrderBySelector","Button","UserList","base_url","DeleteModal","user","onClick","selectedId","onCancelClick","escFunction","event","closeModal","keyCode","page","UsersTable","props","handleInputChange","e","setState","query_text","target","value","onUserOrder","order_by_username","onEmailOrder","order_by_email","onCreatedOrder","order_by_created","onChangeEditUsername","editUser_username","onChangeEditPassword","password","errorMessage","state","editUser_password_repeated","editUser_password","onChangeEditPasswordRepeated","onChangeEditEmail","editUser_email","current_user","currentUser","data","page_size","total_elements","waiting_to_change","modal_display","selected_user_id","display_delete_modal","display_edit_modal","editUser_id","edit_error_message","bind","onNextPage","onPreviousPage","fetchData","getUser","getUserName","removeUser","confirmRemoveUser","editUser","onSubmitEdit","logout","document","addEventListener","removeEventListener","get","params","q","order_username","order_email","order_joined","headers","localStorage","getItem","then","res","total","modal_title","modal_year","modal_author","modal_images","id","delete","window","alert","catch","error","response","console","log","_data","_method","method","url","parseInt","filtered_user","users","filter","length","_id","username","email","removeItem","history","push","pathname","display","color","key","onEntryClick","Math","min","ceil"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { OrderBySelector, Button } from '../generics/searchGenerics'\nimport UserList from '../user/UserList'\n\nconst base_url = \"http://127.0.0.1:8000\"\n\n// TODO: generalize DeleteModal\nconst DeleteModal = ({user, onClick, selectedId, onCancelClick}) => (\n    <div className=\"delete_user_modal\">\n        <div className=\"dm_message\">¿Estás seguro de querer borrar el usuario {user}?</div>\n        <div className=\"dm_btn_wrapper\">\n        <button type=\"button\" \n                className=\"btn btn-primary\" \n                id=\"dm_btn_delete\"\n                onClick={() => onClick(selectedId)}>\n                Borrar \n                </button>\n\n        <button onClick={onCancelClick} \n                type=\"button\" \n                className=\"btn btn-secondary\" \n                data-dismiss=\"modal\">\n                Cancelar\n                </button>\n        </div>\n    </div>\n);\n\nfunction escFunction(event, closeModal){\n    if(event.keyCode === 27) {\n        closeModal();\n    }\n}\n\n// Due to setState delay issues, variable managed on a higher level\nlet page = 0;\n\nclass UsersTable extends Component {\n    \n    constructor(props){\n        super(props)\n\n        this.state = {\n            current_user: props.currentUser,\n\n            data: {},\n            query_text: '',\n            \n            order_by_username: '',\n            order_by_email: '',\n            order_by_created: '',\n\n            page_size: 10,\n\n            base_url: props.base_url,\n            total_elements: 0,\n\n            waiting_to_change: false,\n\n            modal_display: 'none',\n            selected_user_id: '',\n\n\n            display_delete_modal: '',\n            display_edit_modal: '',\n\n            editUser_id: '',\n            editUser_username: '',\n            editUser_email: '',\n            editUser_password: '',\n            editUser_password_repeated: '',\n            edit_error_message: '',\n        }\n\n        this.handleInputChange = this.handleInputChange.bind(this)\n        this.onUserOrder = this.onUserOrder.bind(this)\n        this.onEmailOrder = this.onEmailOrder.bind(this)\n        this.onCreatedOrder = this.onCreatedOrder.bind(this)\n\n        this.onNextPage = this.onNextPage.bind(this);\n        this.onPreviousPage = this.onPreviousPage.bind(this);\n\n        this.fetchData = this.fetchData.bind(this);\n\n        this.getUser = this.getUser.bind(this);\n        this.getUserName = this.getUserName.bind(this);\n        this.removeUser = this.removeUser.bind(this);\n        this.confirmRemoveUser = this.confirmRemoveUser.bind(this);\n        this.closeModal = this.closeModal.bind(this);\n\n        this.editUser = this.editUser.bind(this);\n        this.onChangeEditUsername = this.onChangeEditUsername.bind(this);\n        this.onChangeEditPassword = this.onChangeEditPassword.bind(this);\n        this.onChangeEditEmail = this.onChangeEditEmail.bind(this);\n\n        this.onSubmitEdit = this.onSubmitEdit.bind(this);\n\n        this.logout = this.logout.bind(this);\n    }\n\n    componentDidMount(){\n        document.addEventListener(\"keydownUsers\", \n                                  (e) => escFunction(e, this.closeModal), \n                                  false);\n    }\n    componentWillUnmount(){\n        document.removeEventListener(\"keydownUsers\", \n                                    (e) => escFunction(e, this.closeModal), \n                                    false);\n    }\n\n    async componentWillMount(){\n        this.fetchData();\n    }\n  \n    fetchData(){\n        this.setState({total_elements:'', waiting_to_change:true})\n\n        axios.get(base_url + '/users/', \n        {\n            params: {\n                page_size: this.state.page_size,\n                page: page,\n                q: this.state.query_text,\n                order_username: this.state.order_by_username,\n                order_email: this.state.order_by_email,\n                order_joined: this.state.order_by_created\n            },\n            headers: {\n                'Authorization': `Token ${localStorage.getItem(\"token\")}`,\n            }\n        })\n        .then(\n            res => {\n                this.setState({\n                    data: res.data,\n                    total_elements: res.data.total,\n                    waiting_to_change: false,\n                })\n            }\n        )\n    }\n\n    handleInputChange = (e) => {\n        page = 0;\n        this.setState({query_text: e.target.value});\n    }\n\n    onUserOrder = (e) => {\n        this.setState({order_by_username: e.target.value})\n    }\n    \n    onEmailOrder = (e) => {\n        this.setState({order_by_email: e.target.value})\n    }\n\n    onCreatedOrder = (e) => {\n        this.setState({order_by_created: e.target.value})\n    }\n\n    onNextPage(){\n        page += 1;\n        this.fetchData()\n    }\n\n    onPreviousPage(){\n        page -= 1;\n        this.fetchData()\n    }\n\n    closeModal() {\n        this.setState({\n            modal_display: 'none',\n            modal_title: '',\n            modal_year: '',\n            modal_author: '',\n            modal_images: [],\n            display_delete_modal: 'none',\n            display_edit_modal: 'none',\n            selected_user_id: '',\n        })\n    }\n\n    removeUser(id) {\n        this.setState({\n            modal_display: '',\n            display_delete_modal: '',\n            display_edit_modal: 'none',\n            selected_user_id: id,\n        })\n    }\n\n    editUser(id) {        \n        this.setState({\n            modal_display: '',\n            display_delete_modal: 'none',\n            display_edit_modal: '',\n            selected_user_id: id,\n        })\n\n        this.getUser(id);\n    }\n\n    confirmRemoveUser(id) {\n        axios.delete(base_url + `/user/${id}/`,\n            { \n                headers: {\n                    'Authorization': `Token ${localStorage.getItem(\"token\")}`,\n                }\n            })\n            .then(\n                res => {\n                    this.closeModal();\n                    window.alert(\"¡Usuario borrado correctamente!\")\n                    this.fetchData();\n                }\n            ).catch(\n                error => {\n                    window.alert(\"Ha ocurrido un error: \", error.response)\n                }\n            )\n    }\n\n    onSubmitEdit() {\n        console.log(\"click\")\n        var _data = {}\n        var _method = 'patch';\n\n        if (this.state.editUser_username !== ''){\n            _data['username'] = this.state.editUser_username\n        } else {\n            this.setState({\n                errorMessage: 'Campo usuario no puede estar vacio'\n            })\n            return null;\n        }\n\n        if (this.state.editUser_email !== ''){\n            _data['email'] = this.state.editUser_email\n        } else {\n            this.setState({\n                errorMessage: 'Campo email no puede estar vacio'\n            })\n            return null;\n        }\n\n        if(this.state.editUser_email || this.state.editUser_password_repeated){\n            if(this.state.editUser_password !== this.state.editUser_password_repeated){\n                this.setState({\n                    errorMessage: \"Las contraseñas no coinciden\"\n                })\n                return null;\n            }\n        }\n\n        if (this.state.editUser_password !== ''){\n            _data['password'] = this.state.editUser_password\n            _method = 'put';\n        }\n\n        axios({\n            method: _method,\n            url: base_url + `/user/${this.state.editUser_id}/`,\n            data: _data,\n            headers: {\n                'Content-Type': 'application/json; charset=UTF-8',\n                'Authorization': `Token ${localStorage.getItem(\"token\")}`,\n            },\n          }).then(\n              res => {\n                if(parseInt(this.state.current_user) === this.state.editUser_id\n                    && this.state.editUser_password !== ''\n                    ) {\n                    window.alert(\"Tus datos han sido modificados correctamente, tienes que hacer login de nuevo\");    \n                    this.logout();\n                }\n                else {\n                    this.setState({\n                        editUser_id: '',\n                        editUser_username: '',\n                        editUser_email: '',\n                        editUser_password: '',\n                        editUser_password_repeated: '',\n                    });\n                    this.closeModal();\n                    window.alert(\"Usuario modificado correctamente\");\n                    \n                    this.fetchData();\n                }\n              }\n          ).catch(\n              error => {\n                  this.setState({\n                      edit_error_message: error.response\n                  })\n              }\n          );\n    }\n\n    getUserName() {\n        let filtered_user = this.state.data.users.filter(user => user.id===this.state.selected_user_id );\n        return ( filtered_user.length <= 0 )\n                ? \"\"\n                : filtered_user[0]\n    }\n\n    getUser(id) {\n        var _id = id || this.state.selected_user_id;\n        let filtered_user = this.state.data.users.filter(user => user.id=== _id );\n        \n        this.setState({\n            editUser_id: id,\n            editUser_username: filtered_user[0].username,\n            editUser_email: filtered_user[0].email,\n            editUser_password: '',\n        })\n    }\n\n    onChangeEditUsername = (e) => {\n        this.setState({editUser_username: e.target.value})\n    }\n\n    onChangeEditPassword = (e) => {\n        var password = e.target.value;\n        var errorMessage = this.state.errorMessage;\n\n        errorMessage = this.state.editUser_password_repeated !== password \n                ? \"Las contraseñas no coinciden\"\n                : ''\n \n        this.setState({\n            editUser_password: password,\n            errorMessage: errorMessage,\n        })\n    }\n\n    onChangeEditPasswordRepeated = (e) => {\n        var password = e.target.value;\n        var errorMessage = this.state.errorMessage;\n\n        errorMessage = this.state.editUser_password !== password \n                ? \"Las contraseñas no coinciden\"\n                : ''\n \n        this.setState({\n            editUser_password_repeated: password,\n            errorMessage: errorMessage,\n        })\n    }\n\n    onChangeEditEmail = (e) => {\n        this.setState({editUser_email: e.target.value})\n    }\n\n    logout() {\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"user\");\n        this.props.history.push({\n            pathname: '/landing',\n        })\n    }\n\n    render() {\n        \n        if(!this.state.current_user){\n            return <div></div>\n        }\n\n        // TODO: modificar behaviour so that solo la tabla se quede sin renderizar hasta \n        // encontrar datos de nuevo\n        if ( this.state.total_elements === '' ) {\n            return <div />\n        }\n\n        if( this.state.waiting_to_change ) {\n            return <div />\n        }\n \n        return (\n\n        <div className=\"search_container\">\n\n            <div className=\"modal_entry\"  style={{display: this.state.modal_display}} >\n                <div className=\"modal_users\">\n                    <button type=\"button\" className=\"close\" id=\"btn_close_modal\" aria-label=\"Close\" onClick={this.closeModal}>\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                    <div style={{display:this.state.display_delete_modal}}>\n                        <DeleteModal\n                            user={this.getUserName().username}\n                            onClick={this.confirmRemoveUser}\n                            selectedId={this.state.selected_user_id}\n                            onCancelClick={this.closeModal}\n                        />\n                    </div>\n                    <div style={{display:this.state.display_edit_modal}}>\n                        <div className=\"form_edit_user height_100\">\n                            <h3> Editar usuario </h3>\n                            <form>\n                                <label className=\"username_label\">Usuario</label>\n                                <input value={this.state.editUser_username}\n                                        onChange={this.onChangeEditUsername}\n                                        type=\"text\"\n                                        />\n\n                                <label className=\"useremail_label\">Email</label>\n                                <input value={this.state.editUser_email}\n                                        onChange={this.onChangeEditEmail}\n                                        type=\"email\"\n                                        />\n\n                                <label className=\"userpass_label\">Contraseña</label>\n                                    <input\n                                        value={this.state.editUser_password}\n                                        onChange={this.onChangeEditPassword}\n                                        type=\"password\"\n                                        />\n                                <label className=\"userpass_label\">Contraseña</label>\n                                    <input\n                                        value={this.state.editUser_password_repeated}\n                                        onChange={this.onChangeEditPasswordRepeated}\n                                        type=\"password\"\n                                        />\n                                <div className=\"warn edit_user_password\">\n                                    Si se deja vacío el campo contraseña, se mantendrá su valor anterior\n                                </div>\n\n                                <button type=\"button\" \n                                        id=\"edit_user_edit\"\n                                        className=\"btn btn-primary\" \n                                        onClick={this.onSubmitEdit}>\n                                        Editar \n                                        </button>\n\n                                <button onClick={this.closeModal} \n                                        type=\"button\" \n                                        className=\"btn btn-secondary\" \n                                        data-dismiss=\"modal\">\n                                        Cancelar\n                                        </button>\n\n                                <div className=\"warn\"\n                                    style={{color:\"red\"}}\n                                    >\n                                    {this.state.edit_error_message}\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"search_body\">\n                <div className=\"search_filters col-xs-4 col-md-2\">\n                    <div className=\"sf_category xs-12\">\n                        Ordenar por...\n                    </div>\n                    <div className=\"search_filter sf_border_bottom xs-12\">\n                        <div className=\"sf_name\">\n                            Nombre de usuario\n                        </div>\n                        <div className=\"sf_filter\">\n                            <OrderBySelector\n                                onChange={this.onUserOrder}\n                                name=\"order_by_username\"\n                                value={this.state.order_by_username}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"search_filter sf_border_bottom xs-12\">\n                        <div className=\"sf_name\">\n                            Fecha creación usuario\n                        </div>\n                        <div className=\"sf_filter\">\n                            <OrderBySelector\n                                onChange={this.onCreatedOrder}\n                                name=\"order_by_created\"\n                                value={this.state.order_by_created}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"search_filter sf_border_bottom xs-12\">\n                        <div className=\"sf_name\">\n                            Email\n                        </div>\n                        <div className=\"sf_filter\">\n                            <OrderBySelector\n                                onChange={this.onEmailOrder}\n                                name=\"order_by_email\"\n                                value={this.state.order_by_email}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"search_filter xs-12\">\n                        <button onClick={this.fetchData} className=\"sf_name filter_btn\">\n                            Refinar la busqueda!\n                        </button>\n                    </div>\n                </div>\n                <div className=\"search_results_wrapper col-xs-8 col-md-10\">\n                    <div className=\"search_results\">\n                        <div className=\"sr_searchbar\">\n                            <input \n                                onChange={this.handleInputChange} \n                                type=\"text\" \n                                id=\"searchBarSearch\" \n                                className=\"form-control col-xs-9 display_inline_block\" \n                                value={this.state.query_text} \n                                required=\"\" \n                                autoFocus={true}\n                                onKeyPress = { (e) => {\n                                        if(e.key === 'Enter') {\n                                            this.fetchData();\n                                        }\n                                    }\n                                }\n                                />\n                            <span className=\"input-group-btn col-xs-2\">\n                                <button onClick={this.fetchData} className=\"btn btn-search\" type=\"button\">\n                                    <i className=\"fa fa-search fa-fw display_inline_block\"></i>\n                                </button>\n                            </span>\n                        </div>\n                        <UserList   users={this.state.data.users} \n                                    base_url={this.state.base_url} \n                                    onClick={this.onEntryClick} \n                                    onRemoveClick={this.removeUser}\n                                    onEditClick={this.editUser}\n                                    editDelete={true}\n                                    currentUser={this.state.current_user}\n                                    />\n                        { this.state.total_elements>0 ? \n                            <div className=\"pagination_container\">\n                                <div className=\"total_elements\"> \n                                    {(page*this.state.page_size)+1} - {Math.min(this.state.total_elements, ( (1+page) * this.state.page_size ) )} de {this.state.total_elements}\n                                </div>\n                                <Button name=\"previous_page_btn\"\n                                        disabled={page+1 === 1} \n                                        onClick={this.onPreviousPage}/>\n                                <Button name=\"next_page_btn\" \n                                        disabled={page+1 === Math.ceil(this.state.total_elements/this.state.page_size)} \n                                        onClick={this.onNextPage}/>\n                            </div>\n                            :\n                            <div></div>\n                        }\n                    </div>\n                </div>\n            </div>\n\n        </div>\n            \n        )\n    }\n\n}\n\nexport default UsersTable;"]},"metadata":{},"sourceType":"module"}